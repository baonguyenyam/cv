{"version":3,"sources":["main.js","fabricWindow.js","fabricUtilities.js","fabricDirtyStatus.js","fabricDirective.js","fabricConstants.js","fabricCanvas.js","fabric.js"],"names":["angular","module","controller","$scope","Fabric","FabricConstants","Keypress","fabric","saveImage","download","Math","random","addImageUpload","data","obj","fromJson","addImage","filename","selectCanvas","canvasCopy","width","canvasOriginalWidth","height","canvasOriginalHeight","setCanvasSize","setDirty","init","JSONExportProperties","textDefaults","shapeDefaults","json","$on","onSave","updatePage","caption","fileUrl","imageChange","inp","file","files","fr","FileReader","onload","createImage","readAsDataURL","img","Image","imageLoaded","src","result","fabImg","invokeImageChange","that","element","scope","$digest","factory","$window","directive","$timeout","parentClick","link","mousedown","children","e","stopPropagation","self","cb","$","document","keydown","event","ctrlKey","metaKey","which","preventDefault","filter","items","slice","reverse","service","dirty","checkSaveStatus","isDirty","endListening","onbeforeunload","onhashchange","startListening","value","FabricCanvas","$element","setElement","createCanvas","on","setUserHasClickedCanvas","$watch","newVal","setCanvasBackgroundColor","setText","render","setFontSize","setLineHeight","setTextAlign","setFontFamily","setOpacity","setFill","setTint","objectDefaults","rotatingPointOffset","padding","borderColor","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","centerTransform","presetSizes","name","fonts","shapeCategories","shapes","extend","fill","originX","scaleX","scaleY","fontFamily","fontSize","textAlign","FabricWindow","$rootScope","canvasId","canvas","createId","floor","$broadcast","attr","Canvas","getCanvas","getCanvasId","FabricDirtyStatus","options","JSONObject","canvasBackgroundColor","canvasWidth","canvasHeight","maxContinuousRenderLoops","continuousRenderTimeDelay","editable","loading","initialized","userHasClickedCanvas","downloadMultipler","imageDefaults","windowDefaults","canvasDefaults","selection","capitalize","string","charAt","toUpperCase","getActiveStyle","styleName","object","getActiveObject","getSelectionStyles","isEditing","setActiveStyle","setSelectionStyles","style","getActiveProp","setActiveProp","set","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","length","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","blob","Blob","type","isHex","str","test","renderCount","objects","getObjects","setCoords","calcOffset","renderAll","setCanvas","newCanvas","setTextDefaults","setJSONExportProperties","color","setBackgroundColor","setCanvasWidth","setWidth","setCanvasHeight","setHeight","stopContinuousRendering","initialCanvasScale","canvasScale","resetZoom","originalWidth","originalHeight","setZoom","isLoading","deactivateAll","deselectActiveObject","clearCanvas","clear","addObjectToCanvas","originalScaleX","originalScaleY","originalLeft","left","originalTop","top","add","setObjectZoom","setActiveObject","bringToFront","center","imageURL","fromURL","id","p","imageOptions","filters","Tint","opacity","applyFilters","bind","addShape","svgURL","loadSVGFromURL","util","groupSVGElements","isSameColor","paths","addText","Text","getText","getFontSize","parseInt","getTextAlign","toLowerCase","getFontFamily","getLineHeight","parseFloat","isBold","toggleBold","isItalic","toggleItalic","isUnderline","indexOf","toggleUnderline","replace","isLinethrough","toggleLinethrough","getOpacity","getTintOpacity","getFlipX","setFlipX","toggleFlipX","activeObject","updateActiveObjectOriginals","centerH","centerV","sendBackwards","sendToBack","bringForward","isTinted","toggleTint","tintopacit","console","log","tintopacity","tint","filterre","getTint","undefined","getFill","setFillPath","setCanvasZoom","tempScaleX","tempScaleY","tempLeft","tempTop","tempWidth","tempHeight","toggleLockActiveObject","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockUniScaling","lockRotation","lockObject","selectActiveObject","selectedObject","text","lineHeight","deleteActiveObject","remove","setLoading","setInitalized","isInitalized","getJSON","JSON","stringify","toJSON","loadJSON","loadFromJSON","disableEditing","getCanvasData","toDataURL","getWidth","getHeight","multiplier","getCanvasBlob","base64Data","blobUrl","URL","createObjectURL","createElement","href","click","continuousRenderCounter","continuousRenderHandle","cancel","startContinuousRendering","continuousRender","forEachObject","selectable","enableEditing","setCanvasDefaults","setWindowDefaults","Object","prototype","startCanvasListeners","background"],"mappings":"AAAAA,OAAA,CACAC,MADA,CACA,cADA,EACA,CACA,eADA,EAEA,yBAFA,EAGA,yBAHA,EAIA,oBAJA,CADA,EAOAC,UAPA,CAOA,YAPA,EAOA,CACA,QADA,EAEA,QAFA,EAGA,iBAHA,EAIA,UAJA,EAKA,UAAAC,MAAA,EAAAC,MAAA,EAAAC,eAAA,EAAAC,QAAA,EAAA;AACAH,EAAAA,MAAA,CAAAI,MAAA,GAAA,EAAA;AACAJ,EAAAA,MAAA,CAAAE,eAAA,GAAAA,eAAA;;AAGAF,EAAAA,MAAA,CAAAK,SAAA,GAAA,YAAA;AACAL,IAAAA,MAAA,CAAAI,MAAA,CAAAE,QAAA,CAAA,YAAAC,IAAA,CAAAC,MAAA,EAAA;AACA,GAFA,CALA,CASA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAEAR,EAAAA,MAAA,CAAAS,cAAA,GAAA,UAAAC,IAAA,EAAA;AACA,QAAAC,GAAA,GAAAd,OAAA,CAAAe,QAAA,CAAAF,IAAA,CAAA;AACAV,IAAAA,MAAA,CAAAa,QAAA,CAAAF,GAAA,CAAAG,QAAA;AACA,GAHA,CApBA,CAyBA;AACA;AACA;;;AACAd,EAAAA,MAAA,CAAAe,YAAA,GAAA,YAAA;AACAf,IAAAA,MAAA,CAAAgB,UAAA,GAAA;AACAC,MAAAA,KAAA,EAAAjB,MAAA,CAAAI,MAAA,CAAAc,mBADA;AAEAC,MAAAA,MAAA,EAAAnB,MAAA,CAAAI,MAAA,CAAAgB;AAFA,KAAA;AAIA,GALA;;AAOApB,EAAAA,MAAA,CAAAqB,aAAA,GAAA,YAAA;AACArB,IAAAA,MAAA,CAAAI,MAAA,CAAAiB,aAAA,CACArB,MAAA,CAAAgB,UAAA,CAAAC,KADA,EAEAjB,MAAA,CAAAgB,UAAA,CAAAG,MAFA;AAIAnB,IAAAA,MAAA,CAAAI,MAAA,CAAAkB,QAAA,CAAA,IAAA,EALA,CAMA;AACA,GAPA,CAnCA,CA4CA;AACA;AACA;;;AACAtB,EAAAA,MAAA,CAAAuB,IAAA,GAAA,YAAA;AACAvB,IAAAA,MAAA,CAAAI,MAAA,GAAA,IAAAH,MAAA,CAAA;AACAuB,MAAAA,oBAAA,EAAAtB,eAAA,CAAAsB,oBADA;AAEAC,MAAAA,YAAA,EAAAvB,eAAA,CAAAuB,YAFA;AAGAC,MAAAA,aAAA,EAAAxB,eAAA,CAAAwB,aAHA;AAIAC,MAAAA,IAAA,EAAA;AAJA,KAAA,CAAA;AAMA,GAPA;;AASA3B,EAAAA,MAAA,CAAA4B,GAAA,CAAA,gBAAA,EAAA5B,MAAA,CAAAuB,IAAA;AAEApB,EAAAA,QAAA,CAAA0B,MAAA,CAAA,YAAA;AACA7B,IAAAA,MAAA,CAAA8B,UAAA;AACA,GAFA,EA1DA,CA6DA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA9B,EAAAA,MAAA,CAAA+B,OAAA,GAAA,EAAA;AACA/B,EAAAA,MAAA,CAAAgC,OAAA,GAAA,EAAA;;AAEAhC,EAAAA,MAAA,CAAAiC,WAAA,GAAA,UAAAC,GAAA,EAAA;AACA;AACAC,IAAAA,IAAA,GAAAD,GAAA,CAAAE,KAAA,CAAA,CAAA,CAAA;AACAC,IAAAA,EAAA,GAAA,IAAAC,UAAA,EAAA;AACAD,IAAAA,EAAA,CAAAE,MAAA,GAAAC,WAAA;AACAH,IAAAA,EAAA,CAAAI,aAAA,CAAAN,IAAA;AAEA,QAAAO,GAAA,GAAA,IAAA;;AAEA,aAAAF,WAAA,GAAA;AACA;AACAE,MAAAA,GAAA,GAAA,IAAAC,KAAA,EAAA;AACAD,MAAAA,GAAA,CAAAH,MAAA,GAAAK,WAAA;AACAF,MAAAA,GAAA,CAAAG,GAAA,GAAAR,EAAA,CAAAS,MAAA;AACA;;AAEA,aAAAF,WAAA,GAAA;AACA;AACA,UAAAG,MAAA,GAAA,IAAA3C,MAAA,CAAAuC,KAAA,CAAAD,GAAA,CAAA,CAFA,CAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA1C,MAAAA,MAAA,CAAAI,MAAA,CAAAS,QAAA,CAAA6B,GAAA,CAAAG,GAAA,EAhBA,CAiBA;AACA;AACA,GAnCA,CA1FA,CA+HA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;AACA,CAlJA,CAPA,E,CA4JA;;AAEA,IAAAG,iBAAA,GAAA,UAAAC,IAAA,EAAA;AACApD,EAAAA,OAAA,CACAqD,OADA,CACAD,IADA,EAEAE,KAFA,GAGAlB,WAHA,CAGAgB,IAHA;AAIApD,EAAAA,OAAA,CACAqD,OADA,CACAD,IADA,EAEAE,KAFA,GAGAC,OAHA;AAIA,CATA,C,CAaA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;;;ACrNAvD,OAAA,CAAAC,MAAA,CAAA,sBAAA,EAAA,EAAA,EAEAuD,OAFA,CAEA,cAFA,EAEA,CAAA,SAAA,EAAA,UAAAC,OAAA,EAAA;AAEA,SAAAA,OAAA,CAAAlD,MAAA;AAEA,CAJA,CAFA;ACAAP,OAAA,CAAAC,MAAA,CAAA,yBAAA,EAAA,EAAA,EAEAyD,SAFA,CAEA,aAFA,EAEA,CAAA,UAAA,EAAA,UAAAC,QAAA,EAAA;AACA,SAAA;AACAL,IAAAA,KAAA,EAAA;AACAM,MAAAA,WAAA,EAAA;AADA,KADA;AAIAC,IAAAA,IAAA,EAAA,UAAAP,KAAA,EAAAD,OAAA,EAAA;AACAA,MAAAA,OAAA,CAAAS,SAAA,CAAA,YAAA;AACAH,QAAAA,QAAA,CAAA,YAAA;AACAL,UAAAA,KAAA,CAAAM,WAAA;AACA,SAFA,CAAA;AAGA,OAJA,EAKAG,QALA,GAMAD,SANA,CAMA,UAAAE,CAAA,EAAA;AACAA,QAAAA,CAAA,CAAAC,eAAA;AACA,OARA;AASA;AAdA,GAAA;AAgBA,CAjBA,CAFA,EAqBAT,OArBA,CAqBA,UArBA,EAqBA,CAAA,YAAA;AACA,MAAAU,IAAA,GAAA,EAAA;;AAEAA,EAAAA,IAAA,CAAAlC,MAAA,GAAA,UAAAmC,EAAA,EAAA;AACAC,IAAAA,CAAA,CAAAC,QAAA,CAAA,CAAAC,OAAA,CAAA,UAAAC,KAAA,EAAA;AACA;AACA;AACA,UAAA,CAAAA,KAAA,CAAAC,OAAA,IAAAD,KAAA,CAAAE,OAAA,KAAAF,KAAA,CAAAG,KAAA,KAAA,EAAA,EAAA;AACA;AACAH,QAAAA,KAAA,CAAAI,cAAA;AAEAR,QAAAA,EAAA;AAEA,eAAA,KAAA;AACA;AACA,KAXA;AAYA,GAbA;;AAeA,SAAAD,IAAA;AACA,CAnBA,CArBA,EA0CAU,MA1CA,CA0CA,SA1CA,EA0CA,CAAA,YAAA;AACA,SAAA,UAAAC,KAAA,EAAA;AACA,QAAAA,KAAA,EAAA;AACA,aAAAA,KAAA,CAAAC,KAAA,GAAAC,OAAA,EAAA;AACA;AACA,GAJA;AAKA,CANA,CA1CA;ACAA/E,OAAA,CAAAC,MAAA,CAAA,2BAAA,EAAA,EAAA,EAEA+E,OAFA,CAEA,mBAFA,EAEA,CAAA,SAAA,EAAA,UAAAvB,OAAA,EAAA;AAEA,MAAAS,IAAA,GAAA;AACAe,IAAAA,KAAA,EAAA;AADA,GAAA;;AAIA,WAAAC,eAAA,GAAA;AACA,QAAAhB,IAAA,CAAAiB,OAAA,EAAA,EAAA;AACA,aAAA,2FAAA;AACA;AACA;;AAEAjB,EAAAA,IAAA,CAAAkB,YAAA,GAAA,YAAA;AACA3B,IAAAA,OAAA,CAAA4B,cAAA,GAAA,IAAA;AACA5B,IAAAA,OAAA,CAAA6B,YAAA,GAAA,IAAA;AACA,GAHA;;AAKApB,EAAAA,IAAA,CAAAqB,cAAA,GAAA,YAAA;AACA9B,IAAAA,OAAA,CAAA4B,cAAA,GAAAH,eAAA;AACAzB,IAAAA,OAAA,CAAA6B,YAAA,GAAAJ,eAAA;AACA,GAHA;;AAKAhB,EAAAA,IAAA,CAAAiB,OAAA,GAAA,YAAA;AACA,WAAAjB,IAAA,CAAAe,KAAA;AACA,GAFA;;AAIAf,EAAAA,IAAA,CAAAzC,QAAA,GAAA,UAAA+D,KAAA,EAAA;AACAtB,IAAAA,IAAA,CAAAe,KAAA,GAAAO,KAAA;AACA,GAFA;;AAIA,SAAAtB,IAAA;AAEA,CAhCA,CAFA;ACAAlE,OAAA,CACAC,MADA,CACA,yBADA,EACA,CAAA,sBAAA,CADA,EAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA,CAaAyD,SAbA,CAaA,QAbA,EAaA,CACA,UADA,EAEA,cAFA,EAGA,SAHA,EAIA,UAAAC,QAAA,EAAA8B,YAAA,EAAAhC,OAAA,EAAA;AACA,SAAA;AACAH,IAAAA,KAAA,EAAA;AACA/C,MAAAA,MAAA,EAAA;AADA,KADA;AAIAL,IAAAA,UAAA,EAAA,UAAAC,MAAA,EAAAuF,QAAA,EAAA;AACAD,MAAAA,YAAA,CAAAE,UAAA,CAAAD,QAAA;AACAD,MAAAA,YAAA,CAAAG,YAAA,GAFA,CAIA;AACA;;AACAxB,MAAAA,CAAA,CAAA,MAAA,CAAA,CAAAyB,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,YAAA;AACA,YAAA1F,MAAA,CAAAI,MAAA,CAAAuF,uBAAA,EAAA;AACA3F,UAAAA,MAAA,CAAAI,MAAA,CAAAuF,uBAAA,CAAA,IAAA;AACA;AACA,OAJA,EANA,CAYA;AACA;AACA;;AACA3F,MAAAA,MAAA,CAAA4F,MAAA,CAAA,8BAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA7F,MAAA,CAAAI,MAAA,CAAA0F,wBAAA,EAAA;AACA9F,UAAAA,MAAA,CAAAI,MAAA,CAAA0F,wBAAA,CAAAD,MAAA;AACA;AACA,OAJA;AAMA7F,MAAAA,MAAA,CAAA4F,MAAA,CAAA,4BAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA2F,OAAA,CAAAF,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,gCAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,IAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA6F,WAAA,CAAAJ,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,kCAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,IAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA8F,aAAA,CAAAL,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,iCAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA+F,YAAA,CAAAN,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,kCAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,IAAAA,MAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAAgG,aAAA,CAAAP,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,+BAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,IAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAAiG,UAAA,CAAAR,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA,EAxDA,CA8DA;AACA;AACA;AACA;AACA;AACA;;AAEAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,4BAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAAkG,OAAA,CAAAT,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAOAhG,MAAAA,MAAA,CAAA4F,MAAA,CAAA,4BAAA,EAAA,UAAAC,MAAA,EAAA;AACA,YAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAAmG,OAAA,CAAAV,MAAA;AACA7F,UAAAA,MAAA,CAAAI,MAAA,CAAA4F,MAAA;AACA;AACA,OALA;AAMA;AAtFA,GAAA;AAwFA,CA7FA,CAbA;ACAAnG,OAAA,CAAAC,MAAA,CAAA,yBAAA,EAAA,EAAA,EAEA+E,OAFA,CAEA,iBAFA,EAEA,CAAA,YAAA;AAEA,MAAA2B,cAAA,GAAA;AACAC,IAAAA,mBAAA,EAAA,EADA;AAEAC,IAAAA,OAAA,EAAA,CAFA;AAGAC,IAAAA,WAAA,EAAA,QAHA;AAIAC,IAAAA,WAAA,EAAA,uBAJA;AAKAC,IAAAA,UAAA,EAAA,EALA;AAMAC,IAAAA,kBAAA,EAAA,KANA;AAOAC,IAAAA,gBAAA,EAAA,IAPA;AAQAC,IAAAA,eAAA,EAAA;AARA,GAAA;AAWA,SAAA;AAEAC,IAAAA,WAAA,EAAA,CACA;AACAC,MAAAA,IAAA,EAAA,yBADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KADA,EAMA;AACAiG,MAAAA,IAAA,EAAA,0BADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KANA,EAWA;AACAiG,MAAAA,IAAA,EAAA,2BADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAXA,EAgBA;AACAiG,MAAAA,IAAA,EAAA,8BADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAhBA,EAqBA;AACAiG,MAAAA,IAAA,EAAA,qBADA;AAEA/F,MAAAA,MAAA,EAAA,IAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KArBA,EA0BA;AACAiG,MAAAA,IAAA,EAAA,sBADA;AAEAjG,MAAAA,KAAA,EAAA,IAFA;AAGAE,MAAAA,MAAA,EAAA;AAHA,KA1BA,EA+BA;AACA+F,MAAAA,IAAA,EAAA,yBADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KA/BA,EAoCA;AACAiG,MAAAA,IAAA,EAAA,kBADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KApCA,EAyCA;AACAiG,MAAAA,IAAA,EAAA,mCADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAzCA,EA8CA;AACAiG,MAAAA,IAAA,EAAA,OADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KA9CA,EAmDA;AACAiG,MAAAA,IAAA,EAAA,0BADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAnDA,EAwDA;AACAiG,MAAAA,IAAA,EAAA,wBADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAxDA,EA6DA;AACAiG,MAAAA,IAAA,EAAA,iCADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KA7DA,EAkEA;AACAiG,MAAAA,IAAA,EAAA,kCADA;AAEA/F,MAAAA,MAAA,EAAA,IAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAlEA,EAuEA;AACAiG,MAAAA,IAAA,EAAA,gCADA;AAEA/F,MAAAA,MAAA,EAAA,GAFA;AAGAF,MAAAA,KAAA,EAAA;AAHA,KAvEA,CAFA;AAgFAkG,IAAAA,KAAA,EAAA,CACA;AAAAD,MAAAA,IAAA,EAAA;AAAA,KADA,EAEA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAFA,EAGA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAHA,EAIA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAJA,EAKA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KALA,EAMA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KANA,EAOA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAPA,EAQA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KARA,EASA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KATA,EAUA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAVA,EAWA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAXA,EAYA;AAAAA,MAAAA,IAAA,EAAA;AAAA,KAZA,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA,KAhFA;AA4GAE,IAAAA,eAAA,EAAA,CACA;AACAF,MAAAA,IAAA,EAAA,gBADA;AAEAG,MAAAA,MAAA,EAAA,CACA,QADA,EAEA,SAFA,EAGA,SAHA,EAIA,YAJA,EAKA,OALA,EAMA,WANA;AAFA,KADA,EAYA;AACAH,MAAAA,IAAA,EAAA,eADA;AAEAG,MAAAA,MAAA,EAAA,CACA,SADA,EAEA,QAFA,EAGA,YAHA,EAIA,WAJA,EAKA,OALA,EAMA,OANA,EAOA,OAPA,EAQA,SARA;AAFA,KAZA,EAyBA;AACAH,MAAAA,IAAA,EAAA,mBADA;AAEAG,MAAAA,MAAA,EAAA,CACA,QADA,EAEA,QAFA,EAGA,QAHA,EAIA,QAJA;AAFA,KAzBA,EAkCA;AACAH,MAAAA,IAAA,EAAA,oBADA;AAEAG,MAAAA,MAAA,EAAA,CACA,SADA,EAEA,SAFA;AAFA,KAlCA,EAyCA;AACAH,MAAAA,IAAA,EAAA,aADA;AAEAG,MAAAA,MAAA,EAAA;AAFA,KAzCA,EA+CA;AACAH,MAAAA,IAAA,EAAA,QADA;AAEAG,MAAAA,MAAA,EAAA,CACA,QADA,EAEA,QAFA,EAGA,QAHA,EAIA,QAJA,EAKA,QALA;AAFA,KA/CA,CA5GA;AAuKA7F,IAAAA,oBAAA,EAAA,CACA,QADA,EAEA,OAFA,EAGA,YAHA,EAIA,SAJA,EAMA,gBANA,EAOA,eAPA,EAQA,gBARA,EASA,gBATA,EAUA,cAVA,EAWA,aAXA,EAaA,YAbA,EAcA,eAdA,EAeA,eAfA,EAgBA,cAhBA,EAiBA,cAjBA,EAkBA,gBAlBA,EAmBA,cAnBA,EAoBA,YApBA,EAqBA,IArBA,EAsBA,UAtBA,EAuBA,SAvBA,CAvKA;AAiMAE,IAAAA,aAAA,EAAA7B,OAAA,CAAAyH,MAAA,CAAA;AACAC,MAAAA,IAAA,EAAA;AADA,KAAA,EAEAf,cAFA,CAjMA;AAqMA/E,IAAAA,YAAA,EAAA5B,OAAA,CAAAyH,MAAA,CAAA;AACAE,MAAAA,OAAA,EAAA,MADA;AAEAC,MAAAA,MAAA,EAAA,CAFA;AAGAC,MAAAA,MAAA,EAAA,CAHA;AAIAC,MAAAA,UAAA,EAAA,MAJA;AAKAC,MAAAA,QAAA,EAAA,EALA;AAMAL,MAAAA,IAAA,EAAA,MANA;AAOAM,MAAAA,SAAA,EAAA;AAPA,KAAA,EAQArB,cARA;AArMA,GAAA;AAiNA,CA9NA,CAFA;ACAA3G,OAAA,CAAAC,MAAA,CAAA,sBAAA,EAAA,CACA,sBADA,CAAA,EAIA+E,OAJA,CAIA,cAJA,EAIA,CAAA,cAAA,EAAA,YAAA,EAAA,UAAAiD,YAAA,EAAAC,UAAA,EAAA;AAEA,MAAAhE,IAAA,GAAA;AACAiE,IAAAA,QAAA,EAAA,IADA;AAEA9E,IAAAA,OAAA,EAAA,IAFA;AAGA+E,IAAAA,MAAA,EAAA;AAHA,GAAA;;AAMA,WAAAC,QAAA,GAAA;AACA,WAAA3H,IAAA,CAAA4H,KAAA,CAAA5H,IAAA,CAAAC,MAAA,KAAA,KAAA,CAAA;AACA;;AAEAuD,EAAAA,IAAA,CAAAyB,UAAA,GAAA,UAAAtC,OAAA,EAAA;AACAa,IAAAA,IAAA,CAAAb,OAAA,GAAAA,OAAA;AACA6E,IAAAA,UAAA,CAAAK,UAAA,CAAA,yBAAA;AACA,GAHA;;AAKArE,EAAAA,IAAA,CAAA0B,YAAA,GAAA,YAAA;AACA1B,IAAAA,IAAA,CAAAiE,QAAA,GAAA,mBAAAE,QAAA,EAAA;AACAnE,IAAAA,IAAA,CAAAb,OAAA,CAAAmF,IAAA,CAAA,IAAA,EAAAtE,IAAA,CAAAiE,QAAA;AACAjE,IAAAA,IAAA,CAAAkE,MAAA,GAAA,IAAAH,YAAA,CAAAQ,MAAA,CAAAvE,IAAA,CAAAiE,QAAA,CAAA;AACAD,IAAAA,UAAA,CAAAK,UAAA,CAAA,gBAAA;AAEA,WAAArE,IAAA,CAAAkE,MAAA;AACA,GAPA;;AASAlE,EAAAA,IAAA,CAAAwE,SAAA,GAAA,YAAA;AACA,WAAAxE,IAAA,CAAAkE,MAAA;AACA,GAFA;;AAIAlE,EAAAA,IAAA,CAAAyE,WAAA,GAAA,YAAA;AACA,WAAAzE,IAAA,CAAAiE,QAAA;AACA,GAFA;;AAIA,SAAAjE,IAAA;AAEA,CApCA,CAJA;ACAAlE,OAAA,CAAAC,MAAA,CAAA,eAAA,EAAA,CACA,sBADA,EAEA,yBAFA,EAGA,sBAHA,EAIA,2BAJA,CAAA,EAOAuD,OAPA,CAOA,QAPA,EAOA,CACA,cADA,EACA,UADA,EACA,SADA,EACA,cADA,EACA,mBADA,EAEA,UAAAyE,YAAA,EAAAtE,QAAA,EAAAF,OAAA,EAAAgC,YAAA,EAAAmD,iBAAA,EAAA;AAEA,SAAA,UAAAC,OAAA,EAAA;AAEA,QAAAT,MAAA;AACA,QAAAU,UAAA;AACA,QAAA5E,IAAA,GAAAlE,OAAA,CAAAyH,MAAA,CAAA;AACAsB,MAAAA,qBAAA,EAAA,SADA;AAEAC,MAAAA,WAAA,EAAA,GAFA;AAGAC,MAAAA,YAAA,EAAA,GAHA;AAIA1H,MAAAA,oBAAA,EAAA,GAJA;AAKAF,MAAAA,mBAAA,EAAA,GALA;AAMA6H,MAAAA,wBAAA,EAAA,EANA;AAOAC,MAAAA,yBAAA,EAAA,GAPA;AAQAC,MAAAA,QAAA,EAAA,IARA;AASAzH,MAAAA,oBAAA,EAAA,EATA;AAUA0H,MAAAA,OAAA,EAAA,KAVA;AAWApE,MAAAA,KAAA,EAAA,KAXA;AAYAqE,MAAAA,WAAA,EAAA,KAZA;AAaAC,MAAAA,oBAAA,EAAA,KAbA;AAcAC,MAAAA,iBAAA,EAAA,CAdA;AAeAC,MAAAA,aAAA,EAAA,EAfA;AAgBA7H,MAAAA,YAAA,EAAA,EAhBA;AAiBAC,MAAAA,aAAA,EAAA,EAjBA;AAkBA6H,MAAAA,cAAA,EAAA;AACAzC,QAAAA,kBAAA,EAAA,KADA;AAEAL,QAAAA,mBAAA,EAAA,EAFA;AAGAC,QAAAA,OAAA,EAAA;AAHA,OAlBA;AAuBA8C,MAAAA,cAAA,EAAA;AACAC,QAAAA,SAAA,EAAA;AADA;AAvBA,KAAA,EA0BAf,OA1BA,CAAA;;AA4BA,aAAAgB,UAAA,CAAAC,MAAA,EAAA;AACA,UAAA,OAAAA,MAAA,KAAA,QAAA,EAAA;AACA,eAAA,EAAA;AACA;;AAEA,aAAAA,MAAA,CAAAC,MAAA,CAAA,CAAA,EAAAC,WAAA,KAAAF,MAAA,CAAAhF,KAAA,CAAA,CAAA,CAAA;AACA;;AAEA,aAAAmF,cAAA,CAAAC,SAAA,EAAAC,MAAA,EAAA;AACAA,MAAAA,MAAA,GAAAA,MAAA,IAAA/B,MAAA,CAAAgC,eAAA,EAAA;;AAEA,UAAA,OAAAD,MAAA,KAAA,QAAA,IAAAA,MAAA,KAAA,IAAA,EAAA;AACA,eAAA,EAAA;AACA;;AAEA,aAAAA,MAAA,CAAAE,kBAAA,IAAAF,MAAA,CAAAG,SAAA,GAAAH,MAAA,CAAAE,kBAAA,GAAAH,SAAA,KAAA,EAAA,GAAAC,MAAA,CAAAD,SAAA,CAAA,IAAA,EAAA;AACA;;AAEA,aAAAK,cAAA,CAAAL,SAAA,EAAA1E,KAAA,EAAA2E,MAAA,EAAA;AACAA,MAAAA,MAAA,GAAAA,MAAA,IAAA/B,MAAA,CAAAgC,eAAA,EAAA;;AAEA,UAAAD,MAAA,CAAAK,kBAAA,IAAAL,MAAA,CAAAG,SAAA,EAAA;AACA,YAAAG,KAAA,GAAA,EAAA;AACAA,QAAAA,KAAA,CAAAP,SAAA,CAAA,GAAA1E,KAAA;AACA2E,QAAAA,MAAA,CAAAK,kBAAA,CAAAC,KAAA;AACA,OAJA,MAIA;AACAN,QAAAA,MAAA,CAAAD,SAAA,CAAA,GAAA1E,KAAA;AACA;;AAEAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA;;AAEA,aAAAuE,aAAA,CAAArD,IAAA,EAAA;AACA,UAAA8C,MAAA,GAAA/B,MAAA,CAAAgC,eAAA,EAAA;AAEA,aAAA,OAAAD,MAAA,KAAA,QAAA,IAAAA,MAAA,KAAA,IAAA,GAAAA,MAAA,CAAA9C,IAAA,CAAA,GAAA,EAAA;AACA;;AAEA,aAAAsD,aAAA,CAAAtD,IAAA,EAAA7B,KAAA,EAAA;AACA,UAAA2E,MAAA,GAAA/B,MAAA,CAAAgC,eAAA,EAAA;AACAD,MAAAA,MAAA,CAAAS,GAAA,CAAAvD,IAAA,EAAA7B,KAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA;;AAEA,aAAA0E,SAAA,CAAAC,OAAA,EAAAC,WAAA,EAAAC,SAAA,EAAA;AACAD,MAAAA,WAAA,GAAAA,WAAA,IAAA,EAAA;AACAC,MAAAA,SAAA,GAAAA,SAAA,IAAA,GAAA;AAEA,UAAAC,cAAA,GAAAC,IAAA,CAAAJ,OAAA,CAAA;AACA,UAAAK,UAAA,GAAA,EAAA;;AAEA,WAAA,IAAAC,MAAA,GAAA,CAAA,EAAAA,MAAA,GAAAH,cAAA,CAAAI,MAAA,EAAAD,MAAA,IAAAJ,SAAA,EAAA;AACA,YAAAlG,KAAA,GAAAmG,cAAA,CAAAnG,KAAA,CAAAsG,MAAA,EAAAA,MAAA,GAAAJ,SAAA,CAAA;AAEA,YAAAM,WAAA,GAAA,IAAAC,KAAA,CAAAzG,KAAA,CAAAuG,MAAA,CAAA;;AACA,aAAA,IAAAG,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAA1G,KAAA,CAAAuG,MAAA,EAAAG,CAAA,EAAA,EAAA;AACAF,UAAAA,WAAA,CAAAE,CAAA,CAAA,GAAA1G,KAAA,CAAA2G,UAAA,CAAAD,CAAA,CAAA;AACA;;AAEA,YAAAE,SAAA,GAAA,IAAAC,UAAA,CAAAL,WAAA,CAAA;AAEAH,QAAAA,UAAA,CAAAS,IAAA,CAAAF,SAAA;AACA;;AAEA,UAAAG,IAAA,GAAA,IAAAC,IAAA,CAAAX,UAAA,EAAA;AAAAY,QAAAA,IAAA,EAAAhB;AAAA,OAAA,CAAA;AACA,aAAAc,IAAA;AACA;;AAEA,aAAAG,KAAA,CAAAC,GAAA,EAAA;AACA,aAAA,sCAAAC,IAAA,CAAAD,GAAA,CAAA;AACA,KAtGA,CAwGA;AACA;AACA;;;AACA/H,IAAAA,IAAA,CAAAiI,WAAA,GAAA,CAAA;;AACAjI,IAAAA,IAAA,CAAAiC,MAAA,GAAA,YAAA;AACA,UAAAiG,OAAA,GAAAhE,MAAA,CAAAiE,UAAA,EAAA;;AACA,WAAA,IAAAb,CAAA,IAAAY,OAAA,EAAA;AACAA,QAAAA,OAAA,CAAAZ,CAAA,CAAA,CAAAc,SAAA;AACA;;AAEAlE,MAAAA,MAAA,CAAAmE,UAAA;AACAnE,MAAAA,MAAA,CAAAoE,SAAA;AACAtI,MAAAA,IAAA,CAAAiI,WAAA,GARA,CASA;AACA,KAVA;;AAYAjI,IAAAA,IAAA,CAAAuI,SAAA,GAAA,UAAAC,SAAA,EAAA;AACAtE,MAAAA,MAAA,GAAAsE,SAAA;AACAtE,MAAAA,MAAA,CAAAwB,SAAA,GAAA1F,IAAA,CAAAyF,cAAA,CAAAC,SAAA;AACA,KAHA;;AAKA1F,IAAAA,IAAA,CAAAyI,eAAA,GAAA,UAAA/K,YAAA,EAAA;AACAsC,MAAAA,IAAA,CAAAtC,YAAA,GAAAA,YAAA;AACA,KAFA;;AAIAsC,IAAAA,IAAA,CAAA0I,uBAAA,GAAA,UAAAjL,oBAAA,EAAA;AACAuC,MAAAA,IAAA,CAAAvC,oBAAA,GAAAA,oBAAA;AACA,KAFA;;AAIAuC,IAAAA,IAAA,CAAA+B,wBAAA,GAAA,UAAA4G,KAAA,EAAA;AACA3I,MAAAA,IAAA,CAAA6E,qBAAA,GAAA8D,KAAA;AACAzE,MAAAA,MAAA,CAAA0E,kBAAA,CAAAD,KAAA;AACA3I,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA;;AAMAjC,IAAAA,IAAA,CAAA6I,cAAA,GAAA,UAAA3L,KAAA,EAAA;AACA8C,MAAAA,IAAA,CAAA8E,WAAA,GAAA5H,KAAA;AACAgH,MAAAA,MAAA,CAAA4E,QAAA,CAAA5L,KAAA;AACA8C,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA;;AAMAjC,IAAAA,IAAA,CAAA+I,eAAA,GAAA,UAAA3L,MAAA,EAAA;AACA4C,MAAAA,IAAA,CAAA+E,YAAA,GAAA3H,MAAA;AACA8G,MAAAA,MAAA,CAAA8E,SAAA,CAAA5L,MAAA;AACA4C,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA;;AAMAjC,IAAAA,IAAA,CAAA1C,aAAA,GAAA,UAAAJ,KAAA,EAAAE,MAAA,EAAA;AACA4C,MAAAA,IAAA,CAAAiJ,uBAAA;AACA,UAAAC,kBAAA,GAAAlJ,IAAA,CAAAmJ,WAAA;AACAnJ,MAAAA,IAAA,CAAAoJ,SAAA;AAEApJ,MAAAA,IAAA,CAAA8E,WAAA,GAAA5H,KAAA;AACA8C,MAAAA,IAAA,CAAA7C,mBAAA,GAAAD,KAAA;AACAgH,MAAAA,MAAA,CAAAmF,aAAA,GAAAnM,KAAA;AACAgH,MAAAA,MAAA,CAAA4E,QAAA,CAAA5L,KAAA;AAEA8C,MAAAA,IAAA,CAAA+E,YAAA,GAAA3H,MAAA;AACA4C,MAAAA,IAAA,CAAA3C,oBAAA,GAAAD,MAAA;AACA8G,MAAAA,MAAA,CAAAoF,cAAA,GAAAlM,MAAA;AACA8G,MAAAA,MAAA,CAAA8E,SAAA,CAAA5L,MAAA;AAEA4C,MAAAA,IAAA,CAAAmJ,WAAA,GAAAD,kBAAA;AACAlJ,MAAAA,IAAA,CAAAiC,MAAA;AACAjC,MAAAA,IAAA,CAAAuJ,OAAA;AACAvJ,MAAAA,IAAA,CAAAiC,MAAA;AACAjC,MAAAA,IAAA,CAAAuJ,OAAA;AACA,KApBA;;AAsBAvJ,IAAAA,IAAA,CAAAwJ,SAAA,GAAA,YAAA;AACA,aAAAxJ,IAAA,CAAAwJ,SAAA;AACA,KAFA;;AAIAxJ,IAAAA,IAAA,CAAAyJ,aAAA,GAAA,YAAA;AACAvF,MAAAA,MAAA,CAAAuF,aAAA;AACAzJ,MAAAA,IAAA,CAAA0J,oBAAA;AACA1J,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA;;AAMAjC,IAAAA,IAAA,CAAA2J,WAAA,GAAA,YAAA;AACAzF,MAAAA,MAAA,CAAA0F,KAAA;AACA1F,MAAAA,MAAA,CAAA0E,kBAAA,CAAA,SAAA;AACA5I,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA,CAvLA,CA6LA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAA6J,iBAAA,GAAA,UAAA5D,MAAA,EAAA;AACAA,MAAAA,MAAA,CAAA6D,cAAA,GAAA7D,MAAA,CAAAvC,MAAA;AACAuC,MAAAA,MAAA,CAAA8D,cAAA,GAAA9D,MAAA,CAAAtC,MAAA;AACAsC,MAAAA,MAAA,CAAA+D,YAAA,GAAA/D,MAAA,CAAAgE,IAAA;AACAhE,MAAAA,MAAA,CAAAiE,WAAA,GAAAjE,MAAA,CAAAkE,GAAA;AAEAjG,MAAAA,MAAA,CAAAkG,GAAA,CAAAnE,MAAA;AACAjG,MAAAA,IAAA,CAAAqK,aAAA,CAAApE,MAAA;AACA/B,MAAAA,MAAA,CAAAoG,eAAA,CAAArE,MAAA;AACAA,MAAAA,MAAA,CAAAsE,YAAA;AACAvK,MAAAA,IAAA,CAAAwK,MAAA;AACAxK,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAZA,CAhMA,CA8MA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAlD,QAAA,GAAA,UAAA2N,QAAA,EAAA;AACApO,MAAAA,MAAA,CAAAuC,KAAA,CAAA8L,OAAA,CAAAD,QAAA,EAAA,UAAAxE,MAAA,EAAA;AACAA,QAAAA,MAAA,CAAA0E,EAAA,GAAA3K,IAAA,CAAAmE,QAAA,EAAA;;AAEA,aAAA,IAAAyG,CAAA,IAAA5K,IAAA,CAAA6K,YAAA,EAAA;AACA5E,UAAAA,MAAA,CAAA2E,CAAA,CAAA,GAAA5K,IAAA,CAAA6K,YAAA,CAAAD,CAAA,CAAA;AACA,SALA,CAOA;AACA;;;AACA,YAAAlK,MAAA,GAAA,IAAArE,MAAA,CAAAuC,KAAA,CAAAkM,OAAA,CAAAC,IAAA,CAAA;AACApC,UAAAA,KAAA,EAAA,SADA;AAEAqC,UAAAA,OAAA,EAAA;AAFA,SAAA,CAAA;AAIA/E,QAAAA,MAAA,CAAA6E,OAAA,CAAApD,IAAA,CAAAhH,MAAA;AACAuF,QAAAA,MAAA,CAAAgF,YAAA,CAAA/G,MAAA,CAAAoE,SAAA,CAAA4C,IAAA,CAAAhH,MAAA,CAAA;AAEAlE,QAAAA,IAAA,CAAA6J,iBAAA,CAAA5D,MAAA;AACA,OAjBA,EAiBAjG,IAAA,CAAAuF,aAjBA;AAkBA,KAnBA,CAjNA,CAsOA;AACA;AACA;;;AACAvF,IAAAA,IAAA,CAAAmL,QAAA,GAAA,UAAAC,MAAA,EAAA;AACA/O,MAAAA,MAAA,CAAAgP,cAAA,CAAAD,MAAA,EAAA,UAAAlD,OAAA,EAAA;AACA,YAAAjC,MAAA,GAAA5J,MAAA,CAAAiP,IAAA,CAAAC,gBAAA,CAAArD,OAAA,EAAAlI,IAAA,CAAArC,aAAA,CAAA;AACAsI,QAAAA,MAAA,CAAA0E,EAAA,GAAA3K,IAAA,CAAAmE,QAAA,EAAA;;AAEA,aAAA,IAAAyG,CAAA,IAAA5K,IAAA,CAAArC,aAAA,EAAA;AACAsI,UAAAA,MAAA,CAAA2E,CAAA,CAAA,GAAA5K,IAAA,CAAArC,aAAA,CAAAiN,CAAA,CAAA;AACA;;AAEA,YAAA3E,MAAA,CAAAuF,WAAA,IAAAvF,MAAA,CAAAuF,WAAA,EAAA,IAAA,CAAAvF,MAAA,CAAAwF,KAAA,EAAA;AACAxF,UAAAA,MAAA,CAAA1D,OAAA,CAAA,SAAA;AACA,SAFA,MAEA,IAAA0D,MAAA,CAAAwF,KAAA,EAAA;AACA,eAAA,IAAAnE,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAArB,MAAA,CAAAwF,KAAA,CAAAtE,MAAA,EAAAG,CAAA,EAAA,EAAA;AACArB,YAAAA,MAAA,CAAAwF,KAAA,CAAAnE,CAAA,EAAA/E,OAAA,CAAA,SAAA;AACA;AACA;;AAEAvC,QAAAA,IAAA,CAAA6J,iBAAA,CAAA5D,MAAA;AACA,OAjBA;AAkBA,KAnBA,CAzOA,CA8PA;AACA;AACA;;;AACAjG,IAAAA,IAAA,CAAA0L,OAAA,GAAA,UAAA3D,GAAA,EAAA;AACAA,MAAAA,GAAA,GAAAA,GAAA,IAAA,sDAAA;AACA,UAAA9B,MAAA,GAAA,IAAAlC,YAAA,CAAA4H,IAAA,CAAA5D,GAAA,EAAA/H,IAAA,CAAAtC,YAAA,CAAA;AACAuI,MAAAA,MAAA,CAAA0E,EAAA,GAAA3K,IAAA,CAAAmE,QAAA,EAAA;AAEAnE,MAAAA,IAAA,CAAA6J,iBAAA,CAAA5D,MAAA;AACA,KANA;;AAQAjG,IAAAA,IAAA,CAAA4L,OAAA,GAAA,YAAA;AACA,aAAApF,aAAA,CAAA,MAAA,CAAA;AACA,KAFA;;AAIAxG,IAAAA,IAAA,CAAAgC,OAAA,GAAA,UAAAV,KAAA,EAAA;AACAmF,MAAAA,aAAA,CAAA,MAAA,EAAAnF,KAAA,CAAA;AACA,KAFA,CA7QA,CAiRA;AACA;AACA;;;AACAtB,IAAAA,IAAA,CAAA6L,WAAA,GAAA,YAAA;AACA,aAAA9F,cAAA,CAAA,UAAA,CAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAkC,WAAA,GAAA,UAAAZ,KAAA,EAAA;AACA+E,MAAAA,cAAA,CAAA,UAAA,EAAAyF,QAAA,CAAAxK,KAAA,EAAA,EAAA,CAAA,CAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAHA,CAxRA,CA6RA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAA+L,YAAA,GAAA,YAAA;AACA,aAAApG,UAAA,CAAAa,aAAA,CAAA,WAAA,CAAA,CAAA;AACA,KAFA;;AAIAxG,IAAAA,IAAA,CAAAoC,YAAA,GAAA,UAAAd,KAAA,EAAA;AACAmF,MAAAA,aAAA,CAAA,WAAA,EAAAnF,KAAA,CAAA0K,WAAA,EAAA,CAAA;AACA,KAFA,CApSA,CAwSA;AACA;AACA;;;AACAhM,IAAAA,IAAA,CAAAiM,aAAA,GAAA,YAAA;AACA,UAAArI,UAAA,GAAA4C,aAAA,CAAA,YAAA,CAAA;AACA,aAAA5C,UAAA,GAAAA,UAAA,CAAAoI,WAAA,EAAA,GAAA,EAAA;AACA,KAHA;;AAKAhM,IAAAA,IAAA,CAAAqC,aAAA,GAAA,UAAAf,KAAA,EAAA;AACAmF,MAAAA,aAAA,CAAA,YAAA,EAAAnF,KAAA,CAAA0K,WAAA,EAAA,CAAA;AACA,KAFA,CAhTA,CAoTA;AACA;AACA;;;AACAhM,IAAAA,IAAA,CAAAkM,aAAA,GAAA,YAAA;AACA,aAAAnG,cAAA,CAAA,YAAA,CAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAmC,aAAA,GAAA,UAAAb,KAAA,EAAA;AACA+E,MAAAA,cAAA,CAAA,YAAA,EAAA8F,UAAA,CAAA7K,KAAA,EAAA,EAAA,CAAA,CAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAHA,CA3TA,CAgUA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAoM,MAAA,GAAA,YAAA;AACA,aAAArG,cAAA,CAAA,YAAA,CAAA,KAAA,MAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAqM,UAAA,GAAA,YAAA;AACAhG,MAAAA,cAAA,CAAA,YAAA,EACAN,cAAA,CAAA,YAAA,CAAA,KAAA,MAAA,GAAA,EAAA,GAAA,MADA,CAAA;AAEA/F,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA,CAvUA,CA6UA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAsM,QAAA,GAAA,YAAA;AACA,aAAAvG,cAAA,CAAA,WAAA,CAAA,KAAA,QAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAuM,YAAA,GAAA,YAAA;AACAlG,MAAAA,cAAA,CAAA,WAAA,EACAN,cAAA,CAAA,WAAA,CAAA,KAAA,QAAA,GAAA,EAAA,GAAA,QADA,CAAA;AAEA/F,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA,CApVA,CA0VA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAwM,WAAA,GAAA,YAAA;AACA,aAAAzG,cAAA,CAAA,gBAAA,CAAA,CAAA0G,OAAA,CAAA,WAAA,IAAA,CAAA,CAAA;AACA,KAFA;;AAIAzM,IAAAA,IAAA,CAAA0M,eAAA,GAAA,YAAA;AACA,UAAApL,KAAA,GAAAtB,IAAA,CAAAwM,WAAA,KAAAzG,cAAA,CAAA,gBAAA,CAAA,CAAA4G,OAAA,CAAA,WAAA,EAAA,EAAA,CAAA,GAAA5G,cAAA,CAAA,gBAAA,CAAA,GAAA,YAAA;AAEAM,MAAAA,cAAA,CAAA,gBAAA,EAAA/E,KAAA,CAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA,KALA,CAjWA,CAwWA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAA4M,aAAA,GAAA,YAAA;AACA,aAAA7G,cAAA,CAAA,gBAAA,CAAA,CAAA0G,OAAA,CAAA,cAAA,IAAA,CAAA,CAAA;AACA,KAFA;;AAIAzM,IAAAA,IAAA,CAAA6M,iBAAA,GAAA,YAAA;AACA,UAAAvL,KAAA,GAAAtB,IAAA,CAAA4M,aAAA,KAAA7G,cAAA,CAAA,gBAAA,CAAA,CAAA4G,OAAA,CAAA,cAAA,EAAA,EAAA,CAAA,GAAA5G,cAAA,CAAA,gBAAA,CAAA,GAAA,eAAA;AAEAM,MAAAA,cAAA,CAAA,gBAAA,EAAA/E,KAAA,CAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA,KALA,CA/WA,CAsXA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAA+L,YAAA,GAAA,YAAA;AACA,aAAAvF,aAAA,CAAA,WAAA,CAAA;AACA,KAFA;;AAIAxG,IAAAA,IAAA,CAAAoC,YAAA,GAAA,UAAAd,KAAA,EAAA;AACAmF,MAAAA,aAAA,CAAA,WAAA,EAAAnF,KAAA,CAAA;AACA,KAFA,CA7XA,CAiYA;AACA;AACA;;;AACAtB,IAAAA,IAAA,CAAA8M,UAAA,GAAA,YAAA;AACA,aAAA/G,cAAA,CAAA,SAAA,CAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAsC,UAAA,GAAA,UAAAhB,KAAA,EAAA;AACA+E,MAAAA,cAAA,CAAA,SAAA,EAAA/E,KAAA,CAAA;AACA,KAFA;;AAGAtB,IAAAA,IAAA,CAAA+M,cAAA,GAAA,YAAA;AACA,aAAA,IAAA;AACA,KAFA,CA3YA,CA+YA;AACA;AACA;AAEA;AACA;AACA;;;AACA/M,IAAAA,IAAA,CAAAgN,QAAA,GAAA,YAAA;AACA,aAAAxG,aAAA,CAAA,OAAA,CAAA;AACA,KAFA;;AAIAxG,IAAAA,IAAA,CAAAiN,QAAA,GAAA,UAAA3L,KAAA,EAAA;AACAmF,MAAAA,aAAA,CAAA,OAAA,EAAAnF,KAAA,CAAA;AACA,KAFA;;AAIAtB,IAAAA,IAAA,CAAAkN,WAAA,GAAA,YAAA;AACA,UAAA5L,KAAA,GAAAtB,IAAA,CAAAgN,QAAA,KAAA,KAAA,GAAA,IAAA;AACAhN,MAAAA,IAAA,CAAAiN,QAAA,CAAA3L,KAAA;AACAtB,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA,CA9ZA,CAoaA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAwK,MAAA,GAAA,YAAA;AACA,UAAA2C,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAA,QAAAA,YAAA,CAAA3C,MAAA;AACAxK,QAAAA,IAAA,CAAAoN,2BAAA;AACApN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KAPA;;AASAjC,IAAAA,IAAA,CAAAqN,OAAA,GAAA,YAAA;AACA,UAAAF,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAA,QAAAA,YAAA,CAAAE,OAAA;AACArN,QAAAA,IAAA,CAAAoN,2BAAA;AACApN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KAPA;;AASAjC,IAAAA,IAAA,CAAAsN,OAAA,GAAA,YAAA;AACA,UAAAH,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAA,QAAAA,YAAA,CAAAG,OAAA;AACAtN,QAAAA,IAAA,CAAAoN,2BAAA;AACApN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KAPA,CAzbA,CAkcA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAuN,aAAA,GAAA,YAAA;AACA,UAAAJ,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAjJ,QAAAA,MAAA,CAAAqJ,aAAA,CAAAJ,YAAA;AACAnN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KANA;;AAQAjC,IAAAA,IAAA,CAAAwN,UAAA,GAAA,YAAA;AACA,UAAAL,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAjJ,QAAAA,MAAA,CAAAsJ,UAAA,CAAAL,YAAA;AACAnN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KANA;;AAQAjC,IAAAA,IAAA,CAAAyN,YAAA,GAAA,YAAA;AACA,UAAAN,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAjJ,QAAAA,MAAA,CAAAuJ,YAAA,CAAAN,YAAA;AACAnN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KANA;;AAQAjC,IAAAA,IAAA,CAAAuK,YAAA,GAAA,YAAA;AACA,UAAA4C,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAjJ,QAAAA,MAAA,CAAAqG,YAAA,CAAA4C,YAAA;AACAnN,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KANA,CA7dA,CAqeA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAA0N,QAAA,GAAA,YAAA;AACA,aAAAlH,aAAA,CAAA,UAAA,CAAA;AACA,KAFA;;AAIAxG,IAAAA,IAAA,CAAA2N,UAAA,GAAA,YAAA;AACA,UAAAR,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;AACAiH,MAAAA,YAAA,CAAAS,UAAA,GAAA,IAAA;AACAC,MAAAA,OAAA,CAAAC,GAAA,CAAAX,YAAA,CAAAY,WAAA;AACA,UAAArN,MAAA,GAAA,IAAArE,MAAA,CAAAuC,KAAA,CAAAkM,OAAA,CAAAC,IAAA,CAAA;AACApC,QAAAA,KAAA,EAAAwE,YAAA,CAAAa,IADA;AAEAhD,QAAAA,OAAA,EAAAmC,YAAA,CAAAY;AAFA,OAAA,CAAA;AAIA,UAAAE,QAAA,GAAA,IAAA5R,MAAA,CAAAuC,KAAA,CAAAkM,OAAA,CAAAC,IAAA,CAAA;AACApC,QAAAA,KAAA,EAAA,MADA;AAEAqC,QAAAA,OAAA,EAAA;AAFA,OAAA,CAAA;AAIAmC,MAAAA,YAAA,CAAAO,QAAA,GAAA,CAAAP,YAAA,CAAAO,QAAA;AACAP,MAAAA,YAAA,CAAArC,OAAA,CAAA,CAAA,IAAAqC,YAAA,CAAAO,QAAA,GAAAhN,MAAA,GAAAuN,QAAA;AACAd,MAAAA,YAAA,CAAAlC,YAAA,CAAA/G,MAAA,CAAAoE,SAAA,CAAA4C,IAAA,CAAAhH,MAAA,CAAA,EAdA,CAeA;AACA;AACA;AACA;AACA;AACA,KApBA;;AAsBAlE,IAAAA,IAAA,CAAAkO,OAAA,GAAA,YAAA;AACA,UAAAjI,MAAA,GAAA/B,MAAA,CAAAgC,eAAA,EAAA;;AAEA,UAAA,OAAAD,MAAA,KAAA,QAAA,IAAAA,MAAA,KAAA,IAAA,EAAA;AACA,eAAA,EAAA;AACA;;AAEA,UAAAA,MAAA,CAAA6E,OAAA,KAAAqD,SAAA,EAAA;AACA,YAAAlI,MAAA,CAAA6E,OAAA,CAAA,CAAA,MAAAqD,SAAA,EAAA;AACA,iBAAAlI,MAAA,CAAA6E,OAAA,CAAA,CAAA,EAAAnC,KAAA;AACA;AACA;AACA,KAZA;;AAcA3I,IAAAA,IAAA,CAAAwC,OAAA,GAAA,UAAAwL,IAAA,EAAA;AACA,UAAA,CAAAlG,KAAA,CAAAkG,IAAA,CAAA,EAAA;AACA;AACA;;AAEA,UAAAb,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,CAAArC,OAAA,KAAAqD,SAAA,EAAA;AACA,YAAAhB,YAAA,CAAArC,OAAA,CAAA,CAAA,MAAAqD,SAAA,EAAA;AACAhB,UAAAA,YAAA,CAAArC,OAAA,CAAA,CAAA,EAAAnC,KAAA,GAAAqF,IAAA;AACAb,UAAAA,YAAA,CAAAlC,YAAA,CAAA/G,MAAA,CAAAoE,SAAA,CAAA4C,IAAA,CAAAhH,MAAA,CAAA;AACA;AACA;AACA,KAZA,CAhhBA,CA8hBA;AACA;AACA;;;AACAlE,IAAAA,IAAA,CAAAoO,OAAA,GAAA,YAAA;AACA,aAAArI,cAAA,CAAA,MAAA,CAAA;AACA,KAFA;;AAIA/F,IAAAA,IAAA,CAAAuC,OAAA,GAAA,UAAAjB,KAAA,EAAA;AACA,UAAA2E,MAAA,GAAA/B,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAD,MAAA,EAAA;AACA,YAAAA,MAAA,CAAA4B,IAAA,KAAA,MAAA,EAAA;AACAxB,UAAAA,cAAA,CAAA,MAAA,EAAA/E,KAAA,CAAA;AACA,SAFA,MAEA;AACAtB,UAAAA,IAAA,CAAAqO,WAAA,CAAApI,MAAA,EAAA3E,KAAA;AACA;AACA;AACA,KATA;;AAWAtB,IAAAA,IAAA,CAAAqO,WAAA,GAAA,UAAApI,MAAA,EAAA3E,KAAA,EAAA;AACA,UAAA2E,MAAA,CAAAuF,WAAA,IAAAvF,MAAA,CAAAuF,WAAA,EAAA,IAAA,CAAAvF,MAAA,CAAAwF,KAAA,EAAA;AACAxF,QAAAA,MAAA,CAAA1D,OAAA,CAAAjB,KAAA;AACA,OAFA,MAEA,IAAA2E,MAAA,CAAAwF,KAAA,EAAA;AACA,aAAA,IAAAnE,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAArB,MAAA,CAAAwF,KAAA,CAAAtE,MAAA,EAAAG,CAAA,EAAA,EAAA;AACArB,UAAAA,MAAA,CAAAwF,KAAA,CAAAnE,CAAA,EAAA/E,OAAA,CAAAjB,KAAA;AACA;AACA;AACA,KARA,CAhjBA,CA0jBA;AACA;AACA;;;AACAtB,IAAAA,IAAA,CAAAoJ,SAAA,GAAA,YAAA;AACApJ,MAAAA,IAAA,CAAAmJ,WAAA,GAAA,CAAA;AACAnJ,MAAAA,IAAA,CAAAuJ,OAAA;AACA,KAHA;;AAKAvJ,IAAAA,IAAA,CAAAuJ,OAAA,GAAA,YAAA;AACA,UAAArB,OAAA,GAAAhE,MAAA,CAAAiE,UAAA,EAAA;;AACA,WAAA,IAAAb,CAAA,IAAAY,OAAA,EAAA;AACAA,QAAAA,OAAA,CAAAZ,CAAA,CAAA,CAAAwC,cAAA,GAAA5B,OAAA,CAAAZ,CAAA,CAAA,CAAAwC,cAAA,GAAA5B,OAAA,CAAAZ,CAAA,CAAA,CAAAwC,cAAA,GAAA5B,OAAA,CAAAZ,CAAA,CAAA,CAAA5D,MAAA;AACAwE,QAAAA,OAAA,CAAAZ,CAAA,CAAA,CAAAyC,cAAA,GAAA7B,OAAA,CAAAZ,CAAA,CAAA,CAAAyC,cAAA,GAAA7B,OAAA,CAAAZ,CAAA,CAAA,CAAAyC,cAAA,GAAA7B,OAAA,CAAAZ,CAAA,CAAA,CAAA3D,MAAA;AACAuE,QAAAA,OAAA,CAAAZ,CAAA,CAAA,CAAA0C,YAAA,GAAA9B,OAAA,CAAAZ,CAAA,CAAA,CAAA0C,YAAA,GAAA9B,OAAA,CAAAZ,CAAA,CAAA,CAAA0C,YAAA,GAAA9B,OAAA,CAAAZ,CAAA,CAAA,CAAA2C,IAAA;AACA/B,QAAAA,OAAA,CAAAZ,CAAA,CAAA,CAAA4C,WAAA,GAAAhC,OAAA,CAAAZ,CAAA,CAAA,CAAA4C,WAAA,GAAAhC,OAAA,CAAAZ,CAAA,CAAA,CAAA4C,WAAA,GAAAhC,OAAA,CAAAZ,CAAA,CAAA,CAAA6C,GAAA;AACAnK,QAAAA,IAAA,CAAAqK,aAAA,CAAAnC,OAAA,CAAAZ,CAAA,CAAA;AACA;;AAEAtH,MAAAA,IAAA,CAAAsO,aAAA;AACAtO,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAZA;;AAcAjC,IAAAA,IAAA,CAAAqK,aAAA,GAAA,UAAApE,MAAA,EAAA;AACA,UAAAvC,MAAA,GAAAuC,MAAA,CAAA6D,cAAA;AACA,UAAAnG,MAAA,GAAAsC,MAAA,CAAA8D,cAAA;AACA,UAAAE,IAAA,GAAAhE,MAAA,CAAA+D,YAAA;AACA,UAAAG,GAAA,GAAAlE,MAAA,CAAAiE,WAAA;AAEA,UAAAqE,UAAA,GAAA7K,MAAA,GAAA1D,IAAA,CAAAmJ,WAAA;AACA,UAAAqF,UAAA,GAAA7K,MAAA,GAAA3D,IAAA,CAAAmJ,WAAA;AACA,UAAAsF,QAAA,GAAAxE,IAAA,GAAAjK,IAAA,CAAAmJ,WAAA;AACA,UAAAuF,OAAA,GAAAvE,GAAA,GAAAnK,IAAA,CAAAmJ,WAAA;AAEAlD,MAAAA,MAAA,CAAAvC,MAAA,GAAA6K,UAAA;AACAtI,MAAAA,MAAA,CAAAtC,MAAA,GAAA6K,UAAA;AACAvI,MAAAA,MAAA,CAAAgE,IAAA,GAAAwE,QAAA;AACAxI,MAAAA,MAAA,CAAAkE,GAAA,GAAAuE,OAAA;AAEAzI,MAAAA,MAAA,CAAAmC,SAAA;AACA,KAjBA;;AAmBApI,IAAAA,IAAA,CAAAsO,aAAA,GAAA,YAAA;AACA,UAAApR,KAAA,GAAA8C,IAAA,CAAA7C,mBAAA;AACA,UAAAC,MAAA,GAAA4C,IAAA,CAAA3C,oBAAA;AAEA,UAAAsR,SAAA,GAAAzR,KAAA,GAAA8C,IAAA,CAAAmJ,WAAA;AACA,UAAAyF,UAAA,GAAAxR,MAAA,GAAA4C,IAAA,CAAAmJ,WAAA;AAEAjF,MAAAA,MAAA,CAAA4E,QAAA,CAAA6F,SAAA;AACAzK,MAAAA,MAAA,CAAA8E,SAAA,CAAA4F,UAAA;AACA,KATA;;AAWA5O,IAAAA,IAAA,CAAAoN,2BAAA,GAAA,YAAA;AACA,UAAAnH,MAAA,GAAA/B,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAD,MAAA,EAAA;AACAA,QAAAA,MAAA,CAAA6D,cAAA,GAAA7D,MAAA,CAAAvC,MAAA,GAAA1D,IAAA,CAAAmJ,WAAA;AACAlD,QAAAA,MAAA,CAAA8D,cAAA,GAAA9D,MAAA,CAAAtC,MAAA,GAAA3D,IAAA,CAAAmJ,WAAA;AACAlD,QAAAA,MAAA,CAAA+D,YAAA,GAAA/D,MAAA,CAAAgE,IAAA,GAAAjK,IAAA,CAAAmJ,WAAA;AACAlD,QAAAA,MAAA,CAAAiE,WAAA,GAAAjE,MAAA,CAAAkE,GAAA,GAAAnK,IAAA,CAAAmJ,WAAA;AACA;AACA,KARA,CA9mBA,CAwnBA;AACA;AACA;;;AACAnJ,IAAAA,IAAA,CAAA6O,sBAAA,GAAA,YAAA;AACA,UAAA1B,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAAiH,YAAA,EAAA;AACAA,QAAAA,YAAA,CAAA2B,aAAA,GAAA,CAAA3B,YAAA,CAAA2B,aAAA;AACA3B,QAAAA,YAAA,CAAA4B,aAAA,GAAA,CAAA5B,YAAA,CAAA4B,aAAA;AACA5B,QAAAA,YAAA,CAAA6B,YAAA,GAAA,CAAA7B,YAAA,CAAA6B,YAAA;AACA7B,QAAAA,YAAA,CAAA8B,YAAA,GAAA,CAAA9B,YAAA,CAAA8B,YAAA;AACA9B,QAAAA,YAAA,CAAA+B,cAAA,GAAA,CAAA/B,YAAA,CAAA+B,cAAA;AACA/B,QAAAA,YAAA,CAAAgC,YAAA,GAAA,CAAAhC,YAAA,CAAAgC,YAAA;AACAhC,QAAAA,YAAA,CAAAiC,UAAA,GAAA,CAAAjC,YAAA,CAAAiC,UAAA;AACApP,QAAAA,IAAA,CAAAiC,MAAA;AACA;AACA,KAZA,CA3nBA,CAyoBA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAqP,kBAAA,GAAA,YAAA;AACA,UAAAlC,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;;AACA,UAAA,CAAAiH,YAAA,EAAA;AACA;AACA;;AAEAnN,MAAAA,IAAA,CAAAsP,cAAA,GAAAnC,YAAA;AACAnN,MAAAA,IAAA,CAAAsP,cAAA,CAAAC,IAAA,GAAAvP,IAAA,CAAA4L,OAAA,EAAA;AACA5L,MAAAA,IAAA,CAAAsP,cAAA,CAAAzL,QAAA,GAAA7D,IAAA,CAAA6L,WAAA,EAAA;AACA7L,MAAAA,IAAA,CAAAsP,cAAA,CAAAE,UAAA,GAAAxP,IAAA,CAAAkM,aAAA,EAAA;AACAlM,MAAAA,IAAA,CAAAsP,cAAA,CAAAxL,SAAA,GAAA9D,IAAA,CAAA+L,YAAA,EAAA;AACA/L,MAAAA,IAAA,CAAAsP,cAAA,CAAAtE,OAAA,GAAAhL,IAAA,CAAA8M,UAAA,EAAA;AACA9M,MAAAA,IAAA,CAAAsP,cAAA,CAAA1L,UAAA,GAAA5D,IAAA,CAAAiM,aAAA,EAAA;AACAjM,MAAAA,IAAA,CAAAsP,cAAA,CAAA9L,IAAA,GAAAxD,IAAA,CAAAoO,OAAA,EAAA;AACApO,MAAAA,IAAA,CAAAsP,cAAA,CAAAtB,IAAA,GAAAhO,IAAA,CAAAkO,OAAA,EAAA;AACAlO,MAAAA,IAAA,CAAAsP,cAAA,CAAAvB,WAAA,GAAA/N,IAAA,CAAA+M,cAAA,EAAA;AACA,KAhBA;;AAkBA/M,IAAAA,IAAA,CAAA0J,oBAAA,GAAA,YAAA;AACA1J,MAAAA,IAAA,CAAAsP,cAAA,GAAA,KAAA;AACA,KAFA;;AAIAtP,IAAAA,IAAA,CAAAyP,kBAAA,GAAA,YAAA;AACA,UAAAtC,YAAA,GAAAjJ,MAAA,CAAAgC,eAAA,EAAA;AACAhC,MAAAA,MAAA,CAAAwL,MAAA,CAAAvC,YAAA;AACAnN,MAAAA,IAAA,CAAAiC,MAAA;AACA,KAJA,CAlqBA,CAwqBA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAwJ,SAAA,GAAA,YAAA;AACA,aAAAxJ,IAAA,CAAAmF,OAAA;AACA,KAFA;;AAIAnF,IAAAA,IAAA,CAAA2P,UAAA,GAAA,UAAArO,KAAA,EAAA;AACAtB,MAAAA,IAAA,CAAAmF,OAAA,GAAA7D,KAAA;AACA,KAFA;;AAIAtB,IAAAA,IAAA,CAAAzC,QAAA,GAAA,UAAA+D,KAAA,EAAA;AACAoD,MAAAA,iBAAA,CAAAnH,QAAA,CAAA+D,KAAA;AACA,KAFA;;AAIAtB,IAAAA,IAAA,CAAAiB,OAAA,GAAA,YAAA;AACA,aAAAyD,iBAAA,CAAAzD,OAAA,EAAA;AACA,KAFA;;AAIAjB,IAAAA,IAAA,CAAA4P,aAAA,GAAA,UAAAtO,KAAA,EAAA;AACAtB,MAAAA,IAAA,CAAAoF,WAAA,GAAA9D,KAAA;AACA,KAFA;;AAIAtB,IAAAA,IAAA,CAAA6P,YAAA,GAAA,YAAA;AACA,aAAA7P,IAAA,CAAAoF,WAAA;AACA,KAFA,CA/rBA,CAmsBA;AACA;AACA;;;AACApF,IAAAA,IAAA,CAAA8P,OAAA,GAAA,YAAA;AACA,UAAA5G,kBAAA,GAAAlJ,IAAA,CAAAmJ,WAAA;AACAnJ,MAAAA,IAAA,CAAAmJ,WAAA,GAAA,CAAA;AACAnJ,MAAAA,IAAA,CAAAoJ,SAAA;AAEA,UAAAxL,IAAA,GAAAmS,IAAA,CAAAC,SAAA,CAAA9L,MAAA,CAAA+L,MAAA,CAAAjQ,IAAA,CAAAvC,oBAAA,CAAA,CAAA;AAEAuC,MAAAA,IAAA,CAAAmJ,WAAA,GAAAD,kBAAA;AACAlJ,MAAAA,IAAA,CAAAuJ,OAAA;AAEA,aAAA3L,IAAA;AACA,KAXA;;AAaAoC,IAAAA,IAAA,CAAAkQ,QAAA,GAAA,UAAAtS,IAAA,EAAA;AACAoC,MAAAA,IAAA,CAAA2P,UAAA,CAAA,IAAA;AACAzL,MAAAA,MAAA,CAAAiM,YAAA,CAAAvS,IAAA,EAAA,YAAA;AACA6B,QAAAA,QAAA,CAAA,YAAA;AACAO,UAAAA,IAAA,CAAA2P,UAAA,CAAA,KAAA;;AAEA,cAAA,CAAA3P,IAAA,CAAAkF,QAAA,EAAA;AACAlF,YAAAA,IAAA,CAAAoQ,cAAA;AACA;;AAEApQ,UAAAA,IAAA,CAAAiC,MAAA;AACA,SARA,CAAA;AASA,OAVA;AAWA,KAbA,CAntBA,CAkuBA;AACA;AACA;;;AACAjC,IAAAA,IAAA,CAAAqQ,aAAA,GAAA,YAAA;AACA,UAAA1T,IAAA,GAAAuH,MAAA,CAAAoM,SAAA,CAAA;AACApT,QAAAA,KAAA,EAAAgH,MAAA,CAAAqM,QAAA,EADA;AAEAnT,QAAAA,MAAA,EAAA8G,MAAA,CAAAsM,SAAA,EAFA;AAGAC,QAAAA,UAAA,EAAAzQ,IAAA,CAAAsF;AAHA,OAAA,CAAA;AAMA,aAAA3I,IAAA;AACA,KARA;;AAUAqD,IAAAA,IAAA,CAAA0Q,aAAA,GAAA,YAAA;AACA,UAAAC,UAAA,GAAA3Q,IAAA,CAAAqQ,aAAA,EAAA;AACA,UAAA1T,IAAA,GAAAgU,UAAA,CAAAhE,OAAA,CAAA,wBAAA,EAAA,EAAA,CAAA;AACA,UAAAhF,IAAA,GAAAhB,SAAA,CAAAhK,IAAA,EAAA,WAAA,CAAA;AACA,UAAAiU,OAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAnJ,IAAA,CAAA;AAEA,aAAAiJ,OAAA;AACA,KAPA;;AASA5Q,IAAAA,IAAA,CAAAzD,QAAA,GAAA,UAAA4G,IAAA,EAAA;AACA;AACAnD,MAAAA,IAAA,CAAAyJ,aAAA;AAEA,UAAAP,kBAAA,GAAAlJ,IAAA,CAAAmJ,WAAA;AACAnJ,MAAAA,IAAA,CAAAoJ,SAAA,GALA,CAOA;;AACA,UAAAzJ,IAAA,GAAAQ,QAAA,CAAA4Q,aAAA,CAAA,GAAA,CAAA;AACA,UAAAhU,QAAA,GAAAoG,IAAA,GAAA,MAAA;AACAxD,MAAAA,IAAA,CAAApD,QAAA,GAAAQ,QAAA;AACA4C,MAAAA,IAAA,CAAAqR,IAAA,GAAAhR,IAAA,CAAA0Q,aAAA,EAAA;AACA/Q,MAAAA,IAAA,CAAAsR,KAAA;AAEAjR,MAAAA,IAAA,CAAAmJ,WAAA,GAAAD,kBAAA;AACAlJ,MAAAA,IAAA,CAAAuJ,OAAA;AACA,KAhBA,CAxvBA,CA0wBA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACAvJ,IAAAA,IAAA,CAAAkR,uBAAA,GAAA,CAAA;AACAlR,IAAAA,IAAA,CAAAmR,sBAAA;;AAEAnR,IAAAA,IAAA,CAAAiJ,uBAAA,GAAA,YAAA;AACAxJ,MAAAA,QAAA,CAAA2R,MAAA,CAAApR,IAAA,CAAAmR,sBAAA;AACAnR,MAAAA,IAAA,CAAAkR,uBAAA,GAAAlR,IAAA,CAAAgF,wBAAA;AACA,KAHA;;AAKAhF,IAAAA,IAAA,CAAAqR,wBAAA,GAAA,YAAA;AACArR,MAAAA,IAAA,CAAAkR,uBAAA,GAAA,CAAA;AACAlR,MAAAA,IAAA,CAAAsR,gBAAA;AACA,KAHA,CA1xBA,CA+xBA;;;AACAtR,IAAAA,IAAA,CAAAsR,gBAAA,GAAA,YAAA;AACA,UAAAtR,IAAA,CAAAqF,oBAAA,IAAArF,IAAA,CAAAkR,uBAAA,GAAAlR,IAAA,CAAAgF,wBAAA,EAAA;AACA;AACA;;AAEAhF,MAAAA,IAAA,CAAAmR,sBAAA,GAAA1R,QAAA,CAAA,YAAA;AACAO,QAAAA,IAAA,CAAAuJ,OAAA;AACAvJ,QAAAA,IAAA,CAAAiC,MAAA;AACAjC,QAAAA,IAAA,CAAAkR,uBAAA;AACAlR,QAAAA,IAAA,CAAAsR,gBAAA;AACA,OALA,EAKAtR,IAAA,CAAAiF,yBALA,CAAA;AAMA,KAXA,CAhyBA,CA6yBA;AACA;AACA;;;AACAjF,IAAAA,IAAA,CAAA4B,uBAAA,GAAA,UAAAN,KAAA,EAAA;AACAtB,MAAAA,IAAA,CAAAqF,oBAAA,GAAA/D,KAAA;AACA,KAFA;;AAIAtB,IAAAA,IAAA,CAAAmE,QAAA,GAAA,YAAA;AACA,aAAA3H,IAAA,CAAA4H,KAAA,CAAA5H,IAAA,CAAAC,MAAA,KAAA,KAAA,CAAA;AACA,KAFA,CApzBA,CAwzBA;AACA;AACA;;;AACAuD,IAAAA,IAAA,CAAAoQ,cAAA,GAAA,YAAA;AACAlM,MAAAA,MAAA,CAAAwB,SAAA,GAAA,KAAA;AACAxB,MAAAA,MAAA,CAAAqN,aAAA,CAAA,UAAAtL,MAAA,EAAA;AACAA,QAAAA,MAAA,CAAAuL,UAAA,GAAA,KAAA;AACA,OAFA;AAGA,KALA;;AAOAxR,IAAAA,IAAA,CAAAyR,aAAA,GAAA,YAAA;AACAvN,MAAAA,MAAA,CAAAwB,SAAA,GAAA,IAAA;AACAxB,MAAAA,MAAA,CAAAqN,aAAA,CAAA,UAAAtL,MAAA,EAAA;AACAA,QAAAA,MAAA,CAAAuL,UAAA,GAAA,IAAA;AACA,OAFA;AAGA,KALA,CAl0BA,CA00BA;AACA;AACA;;;AACAxR,IAAAA,IAAA,CAAA0R,iBAAA,GAAA,YAAA;AACAxN,MAAAA,MAAA,CAAAwB,SAAA,GAAA1F,IAAA,CAAAyF,cAAA,CAAAC,SAAA;AACA,KAFA;;AAIA1F,IAAAA,IAAA,CAAA2R,iBAAA,GAAA,YAAA;AACA5N,MAAAA,YAAA,CAAA6N,MAAA,CAAAC,SAAA,CAAA9O,kBAAA,GAAA/C,IAAA,CAAAwF,cAAA,CAAAzC,kBAAA;AACAgB,MAAAA,YAAA,CAAA6N,MAAA,CAAAC,SAAA,CAAAnP,mBAAA,GAAA1C,IAAA,CAAAwF,cAAA,CAAA9C,mBAAA;AACAqB,MAAAA,YAAA,CAAA6N,MAAA,CAAAC,SAAA,CAAAlP,OAAA,GAAA3C,IAAA,CAAAwF,cAAA,CAAA7C,OAAA;AACA,KAJA,CAj1BA,CAu1BA;AACA;AACA;;;AACA3C,IAAAA,IAAA,CAAA8R,oBAAA,GAAA,YAAA;AACA5N,MAAAA,MAAA,CAAAvC,EAAA,CAAA,iBAAA,EAAA,YAAA;AACA3B,QAAAA,IAAA,CAAAiJ,uBAAA;AACAxJ,QAAAA,QAAA,CAAA,YAAA;AACAO,UAAAA,IAAA,CAAAqP,kBAAA;AACArP,UAAAA,IAAA,CAAAzC,QAAA,CAAA,IAAA;AACA,SAHA,CAAA;AAIA,OANA;AAQA2G,MAAAA,MAAA,CAAAvC,EAAA,CAAA,mBAAA,EAAA,YAAA;AACA3B,QAAAA,IAAA,CAAAiJ,uBAAA;AACA,OAFA;AAIA/E,MAAAA,MAAA,CAAAvC,EAAA,CAAA,mBAAA,EAAA,YAAA;AACAlC,QAAAA,QAAA,CAAA,YAAA;AACAO,UAAAA,IAAA,CAAA0J,oBAAA;AACA,SAFA,CAAA;AAGA,OAJA;AAMAxF,MAAAA,MAAA,CAAAvC,EAAA,CAAA,cAAA,EAAA,YAAA;AACAuC,QAAAA,MAAA,CAAAmE,UAAA;AACA,OAFA;AAIAnE,MAAAA,MAAA,CAAAvC,EAAA,CAAA,iBAAA,EAAA,YAAA;AACA3B,QAAAA,IAAA,CAAAiJ,uBAAA;AACAxJ,QAAAA,QAAA,CAAA,YAAA;AACAO,UAAAA,IAAA,CAAAoN,2BAAA;AACApN,UAAAA,IAAA,CAAAzC,QAAA,CAAA,IAAA;AACA,SAHA,CAAA;AAIA,OANA;AAOA,KA9BA,CA11BA,CA03BA;AACA;AACA;;;AACAyC,IAAAA,IAAA,CAAAxC,IAAA,GAAA,YAAA;AACA0G,MAAAA,MAAA,GAAA3C,YAAA,CAAAiD,SAAA,EAAA;AACAxE,MAAAA,IAAA,CAAAiE,QAAA,GAAA1C,YAAA,CAAAkD,WAAA,EAAA;AACAP,MAAAA,MAAA,CAAA0F,KAAA,GAHA,CAKA;;AACAhF,MAAAA,UAAA,GAAA9I,OAAA,CAAAe,QAAA,CAAAmD,IAAA,CAAApC,IAAA,CAAA;AACAoC,MAAAA,IAAA,CAAAkQ,QAAA,CAAAlQ,IAAA,CAAApC,IAAA;AAEAgH,MAAAA,UAAA,GAAAA,UAAA,IAAA,EAAA;AAEA5E,MAAAA,IAAA,CAAAmJ,WAAA,GAAA,CAAA;AAEAvE,MAAAA,UAAA,CAAAmN,UAAA,GAAAnN,UAAA,CAAAmN,UAAA,IAAA,SAAA;AACA/R,MAAAA,IAAA,CAAA+B,wBAAA,CAAA6C,UAAA,CAAAmN,UAAA,EAdA,CAgBA;;AACAnN,MAAAA,UAAA,CAAA1H,KAAA,GAAA0H,UAAA,CAAA1H,KAAA,IAAA,GAAA;AACA8C,MAAAA,IAAA,CAAA7C,mBAAA,GAAAyH,UAAA,CAAA1H,KAAA;AAEA0H,MAAAA,UAAA,CAAAxH,MAAA,GAAAwH,UAAA,CAAAxH,MAAA,IAAA,GAAA;AACA4C,MAAAA,IAAA,CAAA3C,oBAAA,GAAAuH,UAAA,CAAAxH,MAAA;AAEA4C,MAAAA,IAAA,CAAA1C,aAAA,CAAA0C,IAAA,CAAA7C,mBAAA,EAAA6C,IAAA,CAAA3C,oBAAA;AAEA2C,MAAAA,IAAA,CAAAiC,MAAA;AACAjC,MAAAA,IAAA,CAAAzC,QAAA,CAAA,KAAA;AACAyC,MAAAA,IAAA,CAAA4P,aAAA,CAAA,IAAA;AAEA5P,MAAAA,IAAA,CAAA0R,iBAAA;AACA1R,MAAAA,IAAA,CAAA2R,iBAAA;AACA3R,MAAAA,IAAA,CAAA8R,oBAAA;AACA9R,MAAAA,IAAA,CAAAqR,wBAAA;AACA3M,MAAAA,iBAAA,CAAArD,cAAA;AACA,KAlCA;;AAoCArB,IAAAA,IAAA,CAAAxC,IAAA;AAEA,WAAAwC,IAAA;AAEA,GAr6BA;AAu6BA,CA36BA,CAPA","file":"main.js","sourcesContent":["angular\r\n\t.module(\"baoNguyenApp\", [\r\n\t\t\"common.fabric\",\r\n\t\t\"common.fabric.utilities\",\r\n\t\t\"common.fabric.constants\",\r\n\t\t'colorpicker.module'\r\n\t])\r\n\t.controller(\"nguyenCtrl\", [\r\n\t\t\"$scope\",\r\n\t\t\"Fabric\",\r\n\t\t\"FabricConstants\",\r\n\t\t\"Keypress\",\r\n\t\tfunction ($scope, Fabric, FabricConstants, Keypress) {\r\n\t\t\t$scope.fabric = {};\r\n\t\t\t$scope.FabricConstants = FabricConstants;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t$scope.saveImage = function () {\r\n\t\t\t\t$scope.fabric.download('nguyen_' +Math.random())\r\n\t\t\t};\r\n\r\n\t\t\t//\r\n\t\t\t// Creating Canvas Objects\r\n\t\t\t// ================================================================\r\n\t\t\t// $scope.addShape = function (path) {\r\n\t\t\t// \t$scope.fabric.addShape(\"http://fabricjs.com/assets/15.svg\");\r\n\t\t\t// };\r\n\r\n\t\t\t// $scope.addImage = function (image) {\r\n\t\t\t// \t$scope.fabric.addImage(\"./img/daniel-season-nine.jpg\");\r\n\t\t\t// };\r\n\r\n\t\t\t$scope.addImageUpload = function (data) {\r\n\t\t\t\tvar obj = angular.fromJson(data);\r\n\t\t\t\t$scope.addImage(obj.filename);\r\n\t\t\t};\r\n\r\n\t\t\t//\r\n\t\t\t// Editing Canvas Size\r\n\t\t\t// ================================================================\r\n\t\t\t$scope.selectCanvas = function () {\r\n\t\t\t\t$scope.canvasCopy = {\r\n\t\t\t\t\twidth: $scope.fabric.canvasOriginalWidth,\r\n\t\t\t\t\theight: $scope.fabric.canvasOriginalHeight\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\t$scope.setCanvasSize = function () {\r\n\t\t\t\t$scope.fabric.setCanvasSize(\r\n\t\t\t\t\t$scope.canvasCopy.width,\r\n\t\t\t\t\t$scope.canvasCopy.height\r\n\t\t\t\t);\r\n\t\t\t\t$scope.fabric.setDirty(true);\r\n\t\t\t\t// delete $scope.canvasCopy;\r\n\t\t\t};\r\n\r\n\t\t\t//\r\n\t\t\t// Init\r\n\t\t\t// ================================================================\r\n\t\t\t$scope.init = function () {\r\n\t\t\t\t$scope.fabric = new Fabric({\r\n\t\t\t\t\tJSONExportProperties: FabricConstants.JSONExportProperties,\r\n\t\t\t\t\ttextDefaults: FabricConstants.textDefaults,\r\n\t\t\t\t\tshapeDefaults: FabricConstants.shapeDefaults,\r\n\t\t\t\t\tjson: {}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t$scope.$on(\"canvas:created\", $scope.init);\r\n\r\n\t\t\tKeypress.onSave(function () {\r\n\t\t\t\t$scope.updatePage();\r\n\t\t\t});\r\n\t\t\t// ================================================================\r\n\t\t\t// var desiredHeight = 300;\r\n\t\t\t// var desiredWidth = 770;\r\n\t\t\t// var myImageData = document.getElementById(\"fileData\");\r\n\t\t\t// var canvas = document.getElementById(\"myCanvas\");\r\n\t\t\t// var canvas = new fabric.Canvas(\"myCanvas\");\r\n\r\n\t\t\t// var rect = new fabric.Rect({\r\n\t\t\t// \tfill: \"lightgray\",\r\n\t\t\t// \tleft: $scope.fabric.width / 2,\r\n\t\t\t// \ttop: $scope.fabric.height / 2,\r\n\t\t\t// \twidth: desiredWidth,\r\n\t\t\t// \theight: desiredHeight,\r\n\t\t\t// \tstroke: \"darkgray\",\r\n\t\t\t// \tstrokeDashArray: [5, 5],\r\n\t\t\t// \tselectable: false\r\n\t\t\t// });\r\n\t\t\t// $scope.fabric.add(rect);\r\n\t\t\t// var clipZone = {\r\n\t\t\t// \ty: rect.top - 0.5 * rect.height,\r\n\t\t\t// \tx: rect.left - 0.5 * rect.width,\r\n\t\t\t// \twidth: desiredWidth,\r\n\t\t\t// \theight: desiredHeight,\r\n\t\t\t// \tquality: 1\r\n\t\t\t// };\r\n\r\n\t\t\t$scope.caption = \"\";\r\n\t\t\t$scope.fileUrl = \"\";\r\n\r\n\t\t\t$scope.imageChange = function (inp) {\r\n\t\t\t\t// console.log(\"imageChange\");\r\n\t\t\t\tfile = inp.files[0];\r\n\t\t\t\tfr = new FileReader();\r\n\t\t\t\tfr.onload = createImage;\r\n\t\t\t\tfr.readAsDataURL(file);\r\n\r\n\t\t\t\tvar img = null;\r\n\r\n\t\t\t\tfunction createImage() {\r\n\t\t\t\t\t// console.log(\"createImage\");\r\n\t\t\t\t\timg = new Image();\r\n\t\t\t\t\timg.onload = imageLoaded;\r\n\t\t\t\t\timg.src = fr.result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction imageLoaded() {\r\n\t\t\t\t\t// console.log(\"imageLoaded\");\r\n\t\t\t\t\tvar fabImg = new fabric.Image(img);\r\n\r\n\t\t\t\t\t// fabImg.scale(1.0).set({\r\n\t\t\t\t\t// \tleft: canvas.width / 2,\r\n\t\t\t\t\t// \ttop: canvas.height / 2\r\n\t\t\t\t\t// });\r\n\r\n\t\t\t\t\t// canvas.add(fabImg);\r\n\t\t\t\t\t// canvas.setActiveObject(fabImg);\r\n\t\t\t\t\t// fabImg.scale(1.0).set({\r\n\t\t\t\t\t// \tleft: 100,\r\n\t\t\t\t\t// \ttop: 100\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// console.log(img)\r\n\t\t\t\t\t$scope.fabric.addImage(img.src);\r\n\t\t\t\t\t// $scope.fabric.setActiveObject(img.src);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// $scope.submit = function (event) { };\r\n\r\n\t\t\t// $scope.capture = function () {\r\n\t\t\t// \tconsole.log(\"capture\");\r\n\t\t\t// \tconsole.log($scope.file);\r\n\t\t\t// \tvar active = canvas.getActiveObject();\r\n\t\t\t// \tcanvas.deactivateAll();\r\n\r\n\t\t\t// \tvar data = canvas.toDataURLWithCropping(\"png\", clipZone);\r\n\r\n\t\t\t// \tmyImageData.value = data;\r\n\t\t\t// \tmyImage.src = data;\r\n\t\t\t// \tcanvas.setActiveObject(active);\r\n\t\t\t// };\r\n\t\t}\r\n\t]);\r\n\r\n////////////\r\n\r\nvar invokeImageChange = function (that) {\r\n\tangular\r\n\t\t.element(that)\r\n\t\t.scope()\r\n\t\t.imageChange(that);\r\n\tangular\r\n\t\t.element(that)\r\n\t\t.scope()\r\n\t\t.$digest();\r\n};\r\n\r\n\r\n\r\n// var ImageCtrl = function ($scope) { };\r\n\r\n// // modify fabric to allow cropping as part of the \"To Data URL\" functionality\r\n// fabric.Canvas.prototype.toDataURLWithCropping = function (\r\n// \tformat,\r\n// \tcropping,\r\n// \tquality\r\n// ) {\r\n// \tvar canvasEl = this.upperCanvasEl || this.lowerCanvasEl,\r\n// \t\tctx = this.contextTop || this.contextContainer,\r\n// \t\ttempCanvasEl = fabric.document.createElement(\"canvas\"),\r\n// \t\ttempCtx,\r\n// \t\timageData;\r\n\r\n// \tif (!tempCanvasEl.getContext && typeof G_vmlCanvasManager !== \"undefined\") {\r\n// \t\tG_vmlCanvasManager.initElement(tempCanvasEl);\r\n// \t}\r\n\r\n// \tthis.renderAll(true);\r\n\r\n// \ttempCanvasEl.width = cropping.width;\r\n// \ttempCanvasEl.height = cropping.height;\r\n\r\n// \timageData = ctx.getImageData(\r\n// \t\tcropping.x,\r\n// \t\tcropping.y,\r\n// \t\tcropping.width,\r\n// \t\tcropping.height\r\n// \t);\r\n\r\n// \ttempCtx = tempCanvasEl.getContext(\"2d\");\r\n// \ttempCtx.putImageData(imageData, 0, 0);\r\n\r\n// \tvar data = fabric.StaticCanvas.supports(\"toDataURLWithQuality\")\r\n// \t\t? tempCanvasEl.toDataURL(\"image/\" + format, quality)\r\n// \t\t: tempCanvasEl.toDataURL(\"image/\" + format);\r\n\r\n// \tthis.contextTop && this.clearContext(this.contextTop);\r\n// \tthis.renderAll();\r\n// \treturn data;\r\n// };\r\n\r\n// // myApp\r\n","angular.module('common.fabric.window', [])\n\n.factory('FabricWindow', ['$window', function($window) {\n\n\treturn $window.fabric;\n\n}]);\n","angular.module('common.fabric.utilities', [])\n\n.directive('parentClick', ['$timeout', function($timeout) {\n\treturn {\n\t\tscope: {\n\t\t\tparentClick: '&'\n\t\t},\n\t\tlink: function(scope, element) {\n\t\t\telement.mousedown(function() {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tscope.parentClick();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.children()\n\t\t\t.mousedown(function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t};\n}])\n\n.factory('Keypress', [function() {\n\tvar self = {};\n\n\tself.onSave = function(cb) {\n\t\t$(document).keydown(function(event) {\n\t\t\t// If Control or Command key is pressed and the S key is pressed\n\t\t\t// run save function. 83 is the key code for S.\n\t\t\tif((event.ctrlKey || event.metaKey) && event.which === 83) {\n\t\t\t\t// Save Function\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tcb();\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t};\n\n\treturn self;\n}])\n\n.filter('reverse', [function() {\n\treturn function(items) {\n\t\tif (items) {\n\t\t\treturn items.slice().reverse();\n\t\t}\n\t};\n}]);","angular.module('common.fabric.dirtyStatus', [])\n\n.service('FabricDirtyStatus', ['$window', function($window) {\n\n\tvar self = {\n\t\tdirty: false\n\t};\n\n\tfunction checkSaveStatus() {\n\t\tif (self.isDirty()) {\n\t\t\treturn \"Oops! You have unsaved changes.\\n\\nPlease save before leaving so you don't lose any work.\";\n\t\t}\n\t}\n\n\tself.endListening = function() {\n\t\t$window.onbeforeunload = null;\n\t\t$window.onhashchange = null;\n\t};\n\n\tself.startListening = function() {\n\t\t$window.onbeforeunload = checkSaveStatus;\n\t\t$window.onhashchange = checkSaveStatus;\n\t};\n\n\tself.isDirty = function() {\n\t\treturn self.dirty;\n\t};\n\n\tself.setDirty = function(value) {\n\t\tself.dirty = value;\n\t};\n\n\treturn self;\n\n}]);\n","angular\n  .module(\"common.fabric.directive\", [\"common.fabric.canvas\"])\n\n  // .directive(\"ngImageEditor\", function() {\n  //   return {\n  //     restrict: \"E\",\n  //     transclude: false,\n  //     replace: true,\n  //     controller: \"ImageCtrl\",\n  //     template: \"Not Used\"\n  //   };\n  // })\n\n  .directive(\"fabric\", [\n    \"$timeout\",\n    \"FabricCanvas\",\n    \"$window\",\n    function($timeout, FabricCanvas, $window) {\n      return {\n        scope: {\n          fabric: \"=\"\n        },\n        controller: function($scope, $element) {\n          FabricCanvas.setElement($element);\n          FabricCanvas.createCanvas();\n\n          // Continue rendering the canvas until the user clicks\n          // to avoid the \"calcOffset\" bug upon load.\n          $(\"body\").on(\"click\", \"canvas\", function() {\n            if ($scope.fabric.setUserHasClickedCanvas) {\n              $scope.fabric.setUserHasClickedCanvas(true);\n            }\n          });\n\n          //\n          // Watching Controller Variables\n          // ============================================================\n          $scope.$watch(\"fabric.canvasBackgroundColor\", function(newVal) {\n            if ($scope.fabric.setCanvasBackgroundColor) {\n              $scope.fabric.setCanvasBackgroundColor(newVal);\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.text\", function(newVal) {\n            if (typeof newVal === \"string\") {\n              $scope.fabric.setText(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.fontSize\", function(newVal) {\n            if (typeof newVal === \"string\" || typeof newVal === \"number\") {\n              $scope.fabric.setFontSize(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.lineHeight\", function(newVal) {\n            if (typeof newVal === \"string\" || typeof newVal === \"number\") {\n              $scope.fabric.setLineHeight(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.textAlign\", function(newVal) {\n            if (typeof newVal === \"string\") {\n              $scope.fabric.setTextAlign(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.fontFamily\", function(newVal) {\n            if (typeof newVal === \"string\" && newVal) {\n              $scope.fabric.setFontFamily(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.opacity\", function(newVal) {\n            if (typeof newVal === \"string\" || typeof newVal === \"number\") {\n              $scope.fabric.setOpacity(newVal);\n              $scope.fabric.render();\n            }\n          });\n          // $scope.$watch(\"fabric.selectedObject.tintopacity\", function(newVal) {\n          //   if (typeof newVal === \"string\" || typeof newVal === \"number\") {\n          //     $scope.fabric.setTintOpacity(newVal);\n          //     $scope.fabric.render();\n          //   }\n          // });\n\n          $scope.$watch(\"fabric.selectedObject.fill\", function(newVal) {\n            if (typeof newVal === \"string\") {\n              $scope.fabric.setFill(newVal);\n              $scope.fabric.render();\n            }\n          });\n\n          $scope.$watch(\"fabric.selectedObject.tint\", function(newVal) {\n            if (typeof newVal === \"string\") {\n              $scope.fabric.setTint(newVal);\n              $scope.fabric.render();\n            }\n          });\n        }\n      };\n    }\n  ]);\n","angular.module('common.fabric.constants', [])\n\n.service('FabricConstants', [function() {\n\n\tvar objectDefaults = {\n\t\trotatingPointOffset: 20,\n\t\tpadding: 0,\n\t\tborderColor: 'EEF6FC',\n\t\tcornerColor: 'rgba(64, 159, 221, 1)',\n\t\tcornerSize: 10,\n\t\ttransparentCorners: false,\n\t\thasRotatingPoint: true,\n\t\tcenterTransform: true\n\t};\n\n\treturn {\n\n\t\tpresetSizes: [\n\t\t\t{\n\t\t\t\tname: 'Banner dài (1200 x 160)',\n\t\t\t\theight: 160,\n\t\t\t\twidth: 1200\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Banner Right (400 x 190)',\n\t\t\t\theight: 190,\n\t\t\t\twidth: 400\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Banner Slider (500 x 316)',\n\t\t\t\theight: 316,\n\t\t\t\twidth: 500\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Banner Thumbnail (200 x 200)',\n\t\t\t\theight: 200,\n\t\t\t\twidth: 200\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Portrait (8.5 x 11)',\n\t\t\t\theight: 1947,\n\t\t\t\twidth: 1510\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Landscape (11 x 8.5)',\n\t\t\t\twidth: 1947,\n\t\t\t\theight: 1510\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Business Card (3.5 x 2)',\n\t\t\t\theight: 368,\n\t\t\t\twidth: 630\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Postcard (6 x 4)',\n\t\t\t\theight: 718,\n\t\t\t\twidth: 1068\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Content/Builder Product Thumbnail',\n\t\t\t\theight: 400,\n\t\t\t\twidth: 760\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Badge',\n\t\t\t\theight: 400,\n\t\t\t\twidth: 400\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Facebook Profile Picture',\n\t\t\t\theight: 300,\n\t\t\t\twidth: 300\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Facebook Cover Picture',\n\t\t\t\theight: 315,\n\t\t\t\twidth: 851\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Facebook Photo Post (Landscape)',\n\t\t\t\theight: 504,\n\t\t\t\twidth: 403\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Facebook Photo Post (Horizontal)',\n\t\t\t\theight: 1008,\n\t\t\t\twidth: 806\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Facebook Full-Width Photo Post',\n\t\t\t\theight: 504,\n\t\t\t\twidth: 843\n\t\t\t}\n\t\t],\n\n\t\tfonts: [\n\t\t\t{ name: 'Roboto' },\n\t\t\t{ name: 'Segoe UI' },\n\t\t\t{ name: 'Roboto Slab' },\n\t\t\t{ name: 'Open Sans' },\n\t\t\t{ name: 'Roboto Mono' },\n\t\t\t{ name: 'Montserrat' },\n\t\t\t{ name: 'Merriweather' },\n\t\t\t{ name: 'Raleway' },\n\t\t\t{ name: 'Ubuntu' },\n\t\t\t{ name: 'Anton' },\n\t\t\t{ name: 'Helvetica Neue' },\n\t\t\t{ name: 'Arial' }\n\t\t\t// { name: 'Lora' },\n\t\t\t// { name: 'Croissant One' },\n\t\t\t// { name: 'Architects Daughter' },\n\t\t\t// { name: 'Emblema One' },\n\t\t\t// { name: 'Graduate' },\n\t\t\t// { name: 'Hammersmith One' },\n\t\t\t// { name: 'Oswald' },\n\t\t\t// { name: 'Oxygen' },\n\t\t\t// { name: 'Krona One' },\n\t\t\t// { name: 'Indie Flower' },\n\t\t\t// { name: 'Courgette' },\n\t\t\t// { name: 'Gruppo' },\n\t\t\t// { name: 'Ranchers' }\n\t\t],\n\n\t\tshapeCategories: [\n\t\t\t{\n\t\t\t\tname: 'Popular Shapes',\n\t\t\t\tshapes: [\n\t\t\t\t\t'arrow6',\n\t\t\t\t\t'bubble4',\n\t\t\t\t\t'circle1',\n\t\t\t\t\t'rectangle1',\n\t\t\t\t\t'star1',\n\t\t\t\t\t'triangle1'\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Simple Shapes',\n\t\t\t\tshapes: [\n\t\t\t\t\t'circle1',\n\t\t\t\t\t'heart1',\n\t\t\t\t\t'rectangle1',\n\t\t\t\t\t'triangle1',\n\t\t\t\t\t'star1',\n\t\t\t\t\t'star2',\n\t\t\t\t\t'star3',\n\t\t\t\t\t'square1'\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Arrows & Pointers',\n\t\t\t\tshapes: [\n\t\t\t\t\t'arrow1',\n\t\t\t\t\t'arrow9',\n\t\t\t\t\t'arrow3',\n\t\t\t\t\t'arrow6',\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Bubbles & Balloons',\n\t\t\t\tshapes: [\n\t\t\t\t\t'bubble5',\n\t\t\t\t\t'bubble4'\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Check Marks',\n\t\t\t\tshapes: [\n\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Badges',\n\t\t\t\tshapes: [\n\t\t\t\t\t'badge1',\n\t\t\t\t\t'badge2',\n\t\t\t\t\t'badge4',\n\t\t\t\t\t'badge5',\n\t\t\t\t\t'badge6'\n\t\t\t\t]\n\t\t\t}\n\t\t],\n\n\t\tJSONExportProperties: [\n\t\t\t'height',\n\t\t\t'width',\n\t\t\t'background',\n\t\t\t'objects',\n\n\t\t\t'originalHeight',\n\t\t\t'originalWidth',\n\t\t\t'originalScaleX',\n\t\t\t'originalScaleY',\n\t\t\t'originalLeft',\n\t\t\t'originalTop',\n\n\t\t\t'lineHeight',\n\t\t\t'lockMovementX',\n\t\t\t'lockMovementY',\n\t\t\t'lockScalingX',\n\t\t\t'lockScalingY',\n\t\t\t'lockUniScaling',\n\t\t\t'lockRotation',\n\t\t\t'lockObject',\n\t\t\t'id',\n\t\t\t'isTinted',\n\t\t\t'filters'\n\t\t],\n\n\t\tshapeDefaults: angular.extend({\n\t\t\tfill: '#0088cc'\n\t\t}, objectDefaults),\n\n\t\ttextDefaults: angular.extend({\n\t\t\toriginX: 'left',\n\t\t\tscaleX: 1,\n\t\t\tscaleY: 1,\n\t\t\tfontFamily: 'Lato',\n\t\t\tfontSize: 16,\n\t\t\tfill: '#000',\n\t\t\ttextAlign: 'left'\n\t\t}, objectDefaults)\n\n\t};\n\n}]);\n","angular.module('common.fabric.canvas', [\n\t'common.fabric.window'\n])\n\n.service('FabricCanvas', ['FabricWindow', '$rootScope', function(FabricWindow, $rootScope) {\n\n\tvar self = {\n\t\tcanvasId: null,\n\t\telement: null,\n\t\tcanvas: null\n\t};\n\n\tfunction createId() {\n\t\treturn Math.floor(Math.random() * 10000);\n\t}\n\n\tself.setElement = function(element) {\n\t\tself.element = element;\n\t\t$rootScope.$broadcast('canvas:element:selected');\n\t};\n\n\tself.createCanvas = function() {\n\t\tself.canvasId = 'fabric-canvas-' + createId();\n\t\tself.element.attr('id', self.canvasId);\n\t\tself.canvas = new FabricWindow.Canvas(self.canvasId);\n\t\t$rootScope.$broadcast('canvas:created');\n\n\t\treturn self.canvas;\n\t};\n\n\tself.getCanvas = function() {\n\t\treturn self.canvas;\n\t};\n\n\tself.getCanvasId = function() {\n\t\treturn self.canvasId;\n\t};\n\n\treturn self;\n\n}]);\n","angular.module('common.fabric', [\n\t'common.fabric.window',\n\t'common.fabric.directive',\n\t'common.fabric.canvas',\n\t'common.fabric.dirtyStatus'\n])\n\n\t.factory('Fabric', [\n\t\t'FabricWindow', '$timeout', '$window', 'FabricCanvas', 'FabricDirtyStatus',\n\t\tfunction (FabricWindow, $timeout, $window, FabricCanvas, FabricDirtyStatus) {\n\n\t\t\treturn function (options) {\n\n\t\t\t\tvar canvas;\n\t\t\t\tvar JSONObject;\n\t\t\t\tvar self = angular.extend({\n\t\t\t\t\tcanvasBackgroundColor: '#ffffff',\n\t\t\t\t\tcanvasWidth: 800,\n\t\t\t\t\tcanvasHeight: 600,\n\t\t\t\t\tcanvasOriginalHeight: 600,\n\t\t\t\t\tcanvasOriginalWidth: 800,\n\t\t\t\t\tmaxContinuousRenderLoops: 25,\n\t\t\t\t\tcontinuousRenderTimeDelay: 500,\n\t\t\t\t\teditable: true,\n\t\t\t\t\tJSONExportProperties: [],\n\t\t\t\t\tloading: false,\n\t\t\t\t\tdirty: false,\n\t\t\t\t\tinitialized: false,\n\t\t\t\t\tuserHasClickedCanvas: false,\n\t\t\t\t\tdownloadMultipler: 2,\n\t\t\t\t\timageDefaults: {},\n\t\t\t\t\ttextDefaults: {},\n\t\t\t\t\tshapeDefaults: {},\n\t\t\t\t\twindowDefaults: {\n\t\t\t\t\t\ttransparentCorners: false,\n\t\t\t\t\t\trotatingPointOffset: 25,\n\t\t\t\t\t\tpadding: 0\n\t\t\t\t\t},\n\t\t\t\t\tcanvasDefaults: {\n\t\t\t\t\t\tselection: false\n\t\t\t\t\t}\n\t\t\t\t}, options);\n\n\t\t\t\tfunction capitalize(string) {\n\t\t\t\t\tif (typeof string !== 'string') {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\t\t\t\t}\n\n\t\t\t\tfunction getActiveStyle(styleName, object) {\n\t\t\t\t\tobject = object || canvas.getActiveObject();\n\n\t\t\t\t\tif (typeof object !== 'object' || object === null) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (object.getSelectionStyles && object.isEditing) ? (object.getSelectionStyles()[styleName] || '') : (object[styleName] || '');\n\t\t\t\t}\n\n\t\t\t\tfunction setActiveStyle(styleName, value, object) {\n\t\t\t\t\tobject = object || canvas.getActiveObject();\n\n\t\t\t\t\tif (object.setSelectionStyles && object.isEditing) {\n\t\t\t\t\t\tvar style = {};\n\t\t\t\t\t\tstyle[styleName] = value;\n\t\t\t\t\t\tobject.setSelectionStyles(style);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobject[styleName] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\tself.render();\n\t\t\t\t}\n\n\t\t\t\tfunction getActiveProp(name) {\n\t\t\t\t\tvar object = canvas.getActiveObject();\n\n\t\t\t\t\treturn typeof object === 'object' && object !== null ? object[name] : '';\n\t\t\t\t}\n\n\t\t\t\tfunction setActiveProp(name, value) {\n\t\t\t\t\tvar object = canvas.getActiveObject();\n\t\t\t\t\tobject.set(name, value);\n\t\t\t\t\tself.render();\n\t\t\t\t}\n\n\t\t\t\tfunction b64toBlob(b64Data, contentType, sliceSize) {\n\t\t\t\t\tcontentType = contentType || '';\n\t\t\t\t\tsliceSize = sliceSize || 512;\n\n\t\t\t\t\tvar byteCharacters = atob(b64Data);\n\t\t\t\t\tvar byteArrays = [];\n\n\t\t\t\t\tfor (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n\t\t\t\t\t\tvar slice = byteCharacters.slice(offset, offset + sliceSize);\n\n\t\t\t\t\t\tvar byteNumbers = new Array(slice.length);\n\t\t\t\t\t\tfor (var i = 0; i < slice.length; i++) {\n\t\t\t\t\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar byteArray = new Uint8Array(byteNumbers);\n\n\t\t\t\t\t\tbyteArrays.push(byteArray);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar blob = new Blob(byteArrays, { type: contentType });\n\t\t\t\t\treturn blob;\n\t\t\t\t}\n\n\t\t\t\tfunction isHex(str) {\n\t\t\t\t\treturn /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/gi.test(str);\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t// Canvas\n\t\t\t\t// ==============================================================\n\t\t\t\tself.renderCount = 0;\n\t\t\t\tself.render = function () {\n\t\t\t\t\tvar objects = canvas.getObjects();\n\t\t\t\t\tfor (var i in objects) {\n\t\t\t\t\t\tobjects[i].setCoords();\n\t\t\t\t\t}\n\n\t\t\t\t\tcanvas.calcOffset();\n\t\t\t\t\tcanvas.renderAll();\n\t\t\t\t\tself.renderCount++;\n\t\t\t\t\t// console.log('Render cycle:', self.renderCount);\n\t\t\t\t};\n\n\t\t\t\tself.setCanvas = function (newCanvas) {\n\t\t\t\t\tcanvas = newCanvas;\n\t\t\t\t\tcanvas.selection = self.canvasDefaults.selection;\n\t\t\t\t};\n\n\t\t\t\tself.setTextDefaults = function (textDefaults) {\n\t\t\t\t\tself.textDefaults = textDefaults;\n\t\t\t\t};\n\n\t\t\t\tself.setJSONExportProperties = function (JSONExportProperties) {\n\t\t\t\t\tself.JSONExportProperties = JSONExportProperties;\n\t\t\t\t};\n\n\t\t\t\tself.setCanvasBackgroundColor = function (color) {\n\t\t\t\t\tself.canvasBackgroundColor = color;\n\t\t\t\t\tcanvas.setBackgroundColor(color);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\tself.setCanvasWidth = function (width) {\n\t\t\t\t\tself.canvasWidth = width;\n\t\t\t\t\tcanvas.setWidth(width);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\tself.setCanvasHeight = function (height) {\n\t\t\t\t\tself.canvasHeight = height;\n\t\t\t\t\tcanvas.setHeight(height);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\tself.setCanvasSize = function (width, height) {\n\t\t\t\t\tself.stopContinuousRendering();\n\t\t\t\t\tvar initialCanvasScale = self.canvasScale;\n\t\t\t\t\tself.resetZoom();\n\n\t\t\t\t\tself.canvasWidth = width;\n\t\t\t\t\tself.canvasOriginalWidth = width;\n\t\t\t\t\tcanvas.originalWidth = width;\n\t\t\t\t\tcanvas.setWidth(width);\n\n\t\t\t\t\tself.canvasHeight = height;\n\t\t\t\t\tself.canvasOriginalHeight = height;\n\t\t\t\t\tcanvas.originalHeight = height;\n\t\t\t\t\tcanvas.setHeight(height);\n\n\t\t\t\t\tself.canvasScale = initialCanvasScale;\n\t\t\t\t\tself.render();\n\t\t\t\t\tself.setZoom();\n\t\t\t\t\tself.render();\n\t\t\t\t\tself.setZoom();\n\t\t\t\t};\n\n\t\t\t\tself.isLoading = function () {\n\t\t\t\t\treturn self.isLoading;\n\t\t\t\t};\n\n\t\t\t\tself.deactivateAll = function () {\n\t\t\t\t\tcanvas.deactivateAll();\n\t\t\t\t\tself.deselectActiveObject();\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\tself.clearCanvas = function () {\n\t\t\t\t\tcanvas.clear();\n\t\t\t\t\tcanvas.setBackgroundColor('#ffffff');\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Creating Objects\n\t\t\t\t// ==============================================================\n\t\t\t\tself.addObjectToCanvas = function (object) {\n\t\t\t\t\tobject.originalScaleX = object.scaleX;\n\t\t\t\t\tobject.originalScaleY = object.scaleY;\n\t\t\t\t\tobject.originalLeft = object.left;\n\t\t\t\t\tobject.originalTop = object.top;\n\n\t\t\t\t\tcanvas.add(object);\n\t\t\t\t\tself.setObjectZoom(object);\n\t\t\t\t\tcanvas.setActiveObject(object);\n\t\t\t\t\tobject.bringToFront();\n\t\t\t\t\tself.center();\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Image\n\t\t\t\t// ==============================================================\n\t\t\t\tself.addImage = function (imageURL) {\n\t\t\t\t\tfabric.Image.fromURL(imageURL, function (object) {\n\t\t\t\t\t\tobject.id = self.createId();\n\n\t\t\t\t\t\tfor (var p in self.imageOptions) {\n\t\t\t\t\t\t\tobject[p] = self.imageOptions[p];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add a filter that can be used to turn the image\n\t\t\t\t\t\t// into a solid colored shape.\n\t\t\t\t\t\tvar filter = new fabric.Image.filters.Tint({\n\t\t\t\t\t\t\tcolor: '#FF0000',\n\t\t\t\t\t\t\topacity: 0\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobject.filters.push(filter);\n\t\t\t\t\t\tobject.applyFilters(canvas.renderAll.bind(canvas));\n\n\t\t\t\t\t\tself.addObjectToCanvas(object);\n\t\t\t\t\t}, self.imageDefaults);\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Shape\n\t\t\t\t// ==============================================================\n\t\t\t\tself.addShape = function (svgURL) {\n\t\t\t\t\tfabric.loadSVGFromURL(svgURL, function (objects) {\n\t\t\t\t\t\tvar object = fabric.util.groupSVGElements(objects, self.shapeDefaults);\n\t\t\t\t\t\tobject.id = self.createId();\n\n\t\t\t\t\t\tfor (var p in self.shapeDefaults) {\n\t\t\t\t\t\t\tobject[p] = self.shapeDefaults[p];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (object.isSameColor && object.isSameColor() || !object.paths) {\n\t\t\t\t\t\t\tobject.setFill('#0088cc');\n\t\t\t\t\t\t} else if (object.paths) {\n\t\t\t\t\t\t\tfor (var i = 0; i < object.paths.length; i++) {\n\t\t\t\t\t\t\t\tobject.paths[i].setFill('#0088cc');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.addObjectToCanvas(object);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Text\n\t\t\t\t// ==============================================================\n\t\t\t\tself.addText = function (str) {\n\t\t\t\t\tstr = str || 'Hello world!\\nWeb: https://baonguyenyam.github.io/cv';\n\t\t\t\t\tvar object = new FabricWindow.Text(str, self.textDefaults);\n\t\t\t\t\tobject.id = self.createId();\n\n\t\t\t\t\tself.addObjectToCanvas(object);\n\t\t\t\t};\n\n\t\t\t\tself.getText = function () {\n\t\t\t\t\treturn getActiveProp('text');\n\t\t\t\t};\n\n\t\t\t\tself.setText = function (value) {\n\t\t\t\t\tsetActiveProp('text', value);\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Font Size\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getFontSize = function () {\n\t\t\t\t\treturn getActiveStyle('fontSize');\n\t\t\t\t};\n\n\t\t\t\tself.setFontSize = function (value) {\n\t\t\t\t\tsetActiveStyle('fontSize', parseInt(value, 10));\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Text Align\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getTextAlign = function () {\n\t\t\t\t\treturn capitalize(getActiveProp('textAlign'));\n\t\t\t\t};\n\n\t\t\t\tself.setTextAlign = function (value) {\n\t\t\t\t\tsetActiveProp('textAlign', value.toLowerCase());\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Font Family\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getFontFamily = function () {\n\t\t\t\t\tvar fontFamily = getActiveProp('fontFamily');\n\t\t\t\t\treturn fontFamily ? fontFamily.toLowerCase() : '';\n\t\t\t\t};\n\n\t\t\t\tself.setFontFamily = function (value) {\n\t\t\t\t\tsetActiveProp('fontFamily', value.toLowerCase());\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Lineheight\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getLineHeight = function () {\n\t\t\t\t\treturn getActiveStyle('lineHeight');\n\t\t\t\t};\n\n\t\t\t\tself.setLineHeight = function (value) {\n\t\t\t\t\tsetActiveStyle('lineHeight', parseFloat(value, 10));\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Bold\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isBold = function () {\n\t\t\t\t\treturn getActiveStyle('fontWeight') === 'bold';\n\t\t\t\t};\n\n\t\t\t\tself.toggleBold = function () {\n\t\t\t\t\tsetActiveStyle('fontWeight',\n\t\t\t\t\t\tgetActiveStyle('fontWeight') === 'bold' ? '' : 'bold');\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Italic\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isItalic = function () {\n\t\t\t\t\treturn getActiveStyle('fontStyle') === 'italic';\n\t\t\t\t};\n\n\t\t\t\tself.toggleItalic = function () {\n\t\t\t\t\tsetActiveStyle('fontStyle',\n\t\t\t\t\t\tgetActiveStyle('fontStyle') === 'italic' ? '' : 'italic');\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Underline\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isUnderline = function () {\n\t\t\t\t\treturn getActiveStyle('textDecoration').indexOf('underline') > -1;\n\t\t\t\t};\n\n\t\t\t\tself.toggleUnderline = function () {\n\t\t\t\t\tvar value = self.isUnderline() ? getActiveStyle('textDecoration').replace('underline', '') : (getActiveStyle('textDecoration') + ' underline');\n\n\t\t\t\t\tsetActiveStyle('textDecoration', value);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Linethrough\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isLinethrough = function () {\n\t\t\t\t\treturn getActiveStyle('textDecoration').indexOf('line-through') > -1;\n\t\t\t\t};\n\n\t\t\t\tself.toggleLinethrough = function () {\n\t\t\t\t\tvar value = self.isLinethrough() ? getActiveStyle('textDecoration').replace('line-through', '') : (getActiveStyle('textDecoration') + ' line-through');\n\n\t\t\t\t\tsetActiveStyle('textDecoration', value);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Text Align\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getTextAlign = function () {\n\t\t\t\t\treturn getActiveProp('textAlign');\n\t\t\t\t};\n\n\t\t\t\tself.setTextAlign = function (value) {\n\t\t\t\t\tsetActiveProp('textAlign', value);\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Opacity\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getOpacity = function () {\n\t\t\t\t\treturn getActiveStyle('opacity');\n\t\t\t\t};\n\n\t\t\t\tself.setOpacity = function (value) {\n\t\t\t\t\tsetActiveStyle('opacity', value);\n\t\t\t\t};\n\t\t\t\tself.getTintOpacity = function () {\n\t\t\t\t\treturn '.5';\n\t\t\t\t};\n\n\t\t\t\t// self.setTintOpacity = function (value) {\n\t\t\t\t// \tsetActiveStyle('opacity', value);\n\t\t\t\t// };\n\n\t\t\t\t//\n\t\t\t\t// FlipX\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getFlipX = function () {\n\t\t\t\t\treturn getActiveProp('flipX');\n\t\t\t\t};\n\n\t\t\t\tself.setFlipX = function (value) {\n\t\t\t\t\tsetActiveProp('flipX', value);\n\t\t\t\t};\n\n\t\t\t\tself.toggleFlipX = function () {\n\t\t\t\t\tvar value = self.getFlipX() ? false : true;\n\t\t\t\t\tself.setFlipX(value);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Align Active Object\n\t\t\t\t// ==============================================================\n\t\t\t\tself.center = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tactiveObject.center();\n\t\t\t\t\t\tself.updateActiveObjectOriginals();\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.centerH = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tactiveObject.centerH();\n\t\t\t\t\t\tself.updateActiveObjectOriginals();\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.centerV = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tactiveObject.centerV();\n\t\t\t\t\t\tself.updateActiveObjectOriginals();\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Active Object Layer Position\n\t\t\t\t// ==============================================================\n\t\t\t\tself.sendBackwards = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tcanvas.sendBackwards(activeObject);\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.sendToBack = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tcanvas.sendToBack(activeObject);\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.bringForward = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tcanvas.bringForward(activeObject);\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.bringToFront = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tcanvas.bringToFront(activeObject);\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Active Object Tint Color\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isTinted = function () {\n\t\t\t\t\treturn getActiveProp('isTinted');\n\t\t\t\t};\n\n\t\t\t\tself.toggleTint = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tactiveObject.tintopacit = '.5'\n\t\t\t\t\tconsole.log(activeObject.tintopacity)\n\t\t\t\t\tvar filter = new fabric.Image.filters.Tint({\n\t\t\t\t\t\tcolor: activeObject.tint,\n\t\t\t\t\t\topacity: activeObject.tintopacity\n\t\t\t\t\t});\n\t\t\t\t\tvar filterre = new fabric.Image.filters.Tint({\n\t\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t\topacity: '0'\n\t\t\t\t\t});\n\t\t\t\t\tactiveObject.isTinted = !activeObject.isTinted;\n\t\t\t\t\tactiveObject.filters[0] = activeObject.isTinted ? filter : filterre;\n\t\t\t\t\tactiveObject.applyFilters(canvas.renderAll.bind(canvas));\n\t\t\t\t\t///////\n\t\t\t\t\t// var activeObject = canvas.getActiveObject();\n\t\t\t\t\t// activeObject.isTinted = !activeObject.isTinted;\n\t\t\t\t\t// activeObject.filters[0].opacity = activeObject.isTinted ? 1 : 0;\n\t\t\t\t\t// activeObject.applyFilters(canvas.renderAll.bind(canvas));\n\t\t\t\t};\n\n\t\t\t\tself.getTint = function () {\n\t\t\t\t\tvar object = canvas.getActiveObject();\n\n\t\t\t\t\tif (typeof object !== 'object' || object === null) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (object.filters !== undefined) {\n\t\t\t\t\t\tif (object.filters[0] !== undefined) {\n\t\t\t\t\t\t\treturn object.filters[0].color;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.setTint = function (tint) {\n\t\t\t\t\tif (!isHex(tint)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject.filters !== undefined) {\n\t\t\t\t\t\tif (activeObject.filters[0] !== undefined) {\n\t\t\t\t\t\t\tactiveObject.filters[0].color = tint;\n\t\t\t\t\t\t\tactiveObject.applyFilters(canvas.renderAll.bind(canvas));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Active Object Fill Color\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getFill = function () {\n\t\t\t\t\treturn getActiveStyle('fill');\n\t\t\t\t};\n\n\t\t\t\tself.setFill = function (value) {\n\t\t\t\t\tvar object = canvas.getActiveObject();\n\t\t\t\t\tif (object) {\n\t\t\t\t\t\tif (object.type === 'text') {\n\t\t\t\t\t\t\tsetActiveStyle('fill', value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.setFillPath(object, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself.setFillPath = function (object, value) {\n\t\t\t\t\tif (object.isSameColor && object.isSameColor() || !object.paths) {\n\t\t\t\t\t\tobject.setFill(value);\n\t\t\t\t\t} else if (object.paths) {\n\t\t\t\t\t\tfor (var i = 0; i < object.paths.length; i++) {\n\t\t\t\t\t\t\tobject.paths[i].setFill(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Canvas Zoom\n\t\t\t\t// ==============================================================\n\t\t\t\tself.resetZoom = function () {\n\t\t\t\t\tself.canvasScale = 1;\n\t\t\t\t\tself.setZoom();\n\t\t\t\t};\n\n\t\t\t\tself.setZoom = function () {\n\t\t\t\t\tvar objects = canvas.getObjects();\n\t\t\t\t\tfor (var i in objects) {\n\t\t\t\t\t\tobjects[i].originalScaleX = objects[i].originalScaleX ? objects[i].originalScaleX : objects[i].scaleX;\n\t\t\t\t\t\tobjects[i].originalScaleY = objects[i].originalScaleY ? objects[i].originalScaleY : objects[i].scaleY;\n\t\t\t\t\t\tobjects[i].originalLeft = objects[i].originalLeft ? objects[i].originalLeft : objects[i].left;\n\t\t\t\t\t\tobjects[i].originalTop = objects[i].originalTop ? objects[i].originalTop : objects[i].top;\n\t\t\t\t\t\tself.setObjectZoom(objects[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.setCanvasZoom();\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\tself.setObjectZoom = function (object) {\n\t\t\t\t\tvar scaleX = object.originalScaleX;\n\t\t\t\t\tvar scaleY = object.originalScaleY;\n\t\t\t\t\tvar left = object.originalLeft;\n\t\t\t\t\tvar top = object.originalTop;\n\n\t\t\t\t\tvar tempScaleX = scaleX * self.canvasScale;\n\t\t\t\t\tvar tempScaleY = scaleY * self.canvasScale;\n\t\t\t\t\tvar tempLeft = left * self.canvasScale;\n\t\t\t\t\tvar tempTop = top * self.canvasScale;\n\n\t\t\t\t\tobject.scaleX = tempScaleX;\n\t\t\t\t\tobject.scaleY = tempScaleY;\n\t\t\t\t\tobject.left = tempLeft;\n\t\t\t\t\tobject.top = tempTop;\n\n\t\t\t\t\tobject.setCoords();\n\t\t\t\t};\n\n\t\t\t\tself.setCanvasZoom = function () {\n\t\t\t\t\tvar width = self.canvasOriginalWidth;\n\t\t\t\t\tvar height = self.canvasOriginalHeight;\n\n\t\t\t\t\tvar tempWidth = width * self.canvasScale;\n\t\t\t\t\tvar tempHeight = height * self.canvasScale;\n\n\t\t\t\t\tcanvas.setWidth(tempWidth);\n\t\t\t\t\tcanvas.setHeight(tempHeight);\n\t\t\t\t};\n\n\t\t\t\tself.updateActiveObjectOriginals = function () {\n\t\t\t\t\tvar object = canvas.getActiveObject();\n\t\t\t\t\tif (object) {\n\t\t\t\t\t\tobject.originalScaleX = object.scaleX / self.canvasScale;\n\t\t\t\t\t\tobject.originalScaleY = object.scaleY / self.canvasScale;\n\t\t\t\t\t\tobject.originalLeft = object.left / self.canvasScale;\n\t\t\t\t\t\tobject.originalTop = object.top / self.canvasScale;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Active Object Lock\n\t\t\t\t// ==============================================================\n\t\t\t\tself.toggleLockActiveObject = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (activeObject) {\n\t\t\t\t\t\tactiveObject.lockMovementX = !activeObject.lockMovementX;\n\t\t\t\t\t\tactiveObject.lockMovementY = !activeObject.lockMovementY;\n\t\t\t\t\t\tactiveObject.lockScalingX = !activeObject.lockScalingX;\n\t\t\t\t\t\tactiveObject.lockScalingY = !activeObject.lockScalingY;\n\t\t\t\t\t\tactiveObject.lockUniScaling = !activeObject.lockUniScaling;\n\t\t\t\t\t\tactiveObject.lockRotation = !activeObject.lockRotation;\n\t\t\t\t\t\tactiveObject.lockObject = !activeObject.lockObject;\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Active Object\n\t\t\t\t// ==============================================================\n\t\t\t\tself.selectActiveObject = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tif (!activeObject) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tself.selectedObject = activeObject;\n\t\t\t\t\tself.selectedObject.text = self.getText();\n\t\t\t\t\tself.selectedObject.fontSize = self.getFontSize();\n\t\t\t\t\tself.selectedObject.lineHeight = self.getLineHeight();\n\t\t\t\t\tself.selectedObject.textAlign = self.getTextAlign();\n\t\t\t\t\tself.selectedObject.opacity = self.getOpacity();\n\t\t\t\t\tself.selectedObject.fontFamily = self.getFontFamily();\n\t\t\t\t\tself.selectedObject.fill = self.getFill();\n\t\t\t\t\tself.selectedObject.tint = self.getTint();\n\t\t\t\t\tself.selectedObject.tintopacity = self.getTintOpacity();\n\t\t\t\t};\n\n\t\t\t\tself.deselectActiveObject = function () {\n\t\t\t\t\tself.selectedObject = false;\n\t\t\t\t};\n\n\t\t\t\tself.deleteActiveObject = function () {\n\t\t\t\t\tvar activeObject = canvas.getActiveObject();\n\t\t\t\t\tcanvas.remove(activeObject);\n\t\t\t\t\tself.render();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// State Managers\n\t\t\t\t// ==============================================================\n\t\t\t\tself.isLoading = function () {\n\t\t\t\t\treturn self.loading;\n\t\t\t\t};\n\n\t\t\t\tself.setLoading = function (value) {\n\t\t\t\t\tself.loading = value;\n\t\t\t\t};\n\n\t\t\t\tself.setDirty = function (value) {\n\t\t\t\t\tFabricDirtyStatus.setDirty(value);\n\t\t\t\t};\n\n\t\t\t\tself.isDirty = function () {\n\t\t\t\t\treturn FabricDirtyStatus.isDirty();\n\t\t\t\t};\n\n\t\t\t\tself.setInitalized = function (value) {\n\t\t\t\t\tself.initialized = value;\n\t\t\t\t};\n\n\t\t\t\tself.isInitalized = function () {\n\t\t\t\t\treturn self.initialized;\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// JSON\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getJSON = function () {\n\t\t\t\t\tvar initialCanvasScale = self.canvasScale;\n\t\t\t\t\tself.canvasScale = 1;\n\t\t\t\t\tself.resetZoom();\n\n\t\t\t\t\tvar json = JSON.stringify(canvas.toJSON(self.JSONExportProperties));\n\n\t\t\t\t\tself.canvasScale = initialCanvasScale;\n\t\t\t\t\tself.setZoom();\n\n\t\t\t\t\treturn json;\n\t\t\t\t};\n\n\t\t\t\tself.loadJSON = function (json) {\n\t\t\t\t\tself.setLoading(true);\n\t\t\t\t\tcanvas.loadFromJSON(json, function () {\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tself.setLoading(false);\n\n\t\t\t\t\t\t\tif (!self.editable) {\n\t\t\t\t\t\t\t\tself.disableEditing();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tself.render();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Download Canvas\n\t\t\t\t// ==============================================================\n\t\t\t\tself.getCanvasData = function () {\n\t\t\t\t\tvar data = canvas.toDataURL({\n\t\t\t\t\t\twidth: canvas.getWidth(),\n\t\t\t\t\t\theight: canvas.getHeight(),\n\t\t\t\t\t\tmultiplier: self.downloadMultipler\n\t\t\t\t\t});\n\n\t\t\t\t\treturn data;\n\t\t\t\t};\n\n\t\t\t\tself.getCanvasBlob = function () {\n\t\t\t\t\tvar base64Data = self.getCanvasData();\n\t\t\t\t\tvar data = base64Data.replace('data:image/png;base64,', '');\n\t\t\t\t\tvar blob = b64toBlob(data, 'image/png');\n\t\t\t\t\tvar blobUrl = URL.createObjectURL(blob);\n\n\t\t\t\t\treturn blobUrl;\n\t\t\t\t};\n\n\t\t\t\tself.download = function (name) {\n\t\t\t\t\t// Stops active object outline from showing in image\n\t\t\t\t\tself.deactivateAll();\n\n\t\t\t\t\tvar initialCanvasScale = self.canvasScale;\n\t\t\t\t\tself.resetZoom();\n\n\t\t\t\t\t// Click an artifical anchor to 'force' download.\n\t\t\t\t\tvar link = document.createElement('a');\n\t\t\t\t\tvar filename = name + '.png';\n\t\t\t\t\tlink.download = filename;\n\t\t\t\t\tlink.href = self.getCanvasBlob();\n\t\t\t\t\tlink.click();\n\n\t\t\t\t\tself.canvasScale = initialCanvasScale;\n\t\t\t\t\tself.setZoom();\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Continuous Rendering\n\t\t\t\t// ==============================================================\n\t\t\t\t// Upon initialization re render the canvas\n\t\t\t\t// to account for fonts loaded from CDN's\n\t\t\t\t// or other lazy loaded items.\n\n\t\t\t\t// Prevent infinite rendering loop\n\t\t\t\tself.continuousRenderCounter = 0;\n\t\t\t\tself.continuousRenderHandle;\n\n\t\t\t\tself.stopContinuousRendering = function () {\n\t\t\t\t\t$timeout.cancel(self.continuousRenderHandle);\n\t\t\t\t\tself.continuousRenderCounter = self.maxContinuousRenderLoops;\n\t\t\t\t};\n\n\t\t\t\tself.startContinuousRendering = function () {\n\t\t\t\t\tself.continuousRenderCounter = 0;\n\t\t\t\t\tself.continuousRender();\n\t\t\t\t};\n\n\t\t\t\t// Prevents the \"not fully rendered up upon init for a few seconds\" bug.\n\t\t\t\tself.continuousRender = function () {\n\t\t\t\t\tif (self.userHasClickedCanvas || self.continuousRenderCounter > self.maxContinuousRenderLoops) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tself.continuousRenderHandle = $timeout(function () {\n\t\t\t\t\t\tself.setZoom();\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t\tself.continuousRenderCounter++;\n\t\t\t\t\t\tself.continuousRender();\n\t\t\t\t\t}, self.continuousRenderTimeDelay);\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Utility\n\t\t\t\t// ==============================================================\n\t\t\t\tself.setUserHasClickedCanvas = function (value) {\n\t\t\t\t\tself.userHasClickedCanvas = value;\n\t\t\t\t};\n\n\t\t\t\tself.createId = function () {\n\t\t\t\t\treturn Math.floor(Math.random() * 10000);\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Toggle Object Selectability\n\t\t\t\t// ==============================================================\n\t\t\t\tself.disableEditing = function () {\n\t\t\t\t\tcanvas.selection = false;\n\t\t\t\t\tcanvas.forEachObject(function (object) {\n\t\t\t\t\t\tobject.selectable = false;\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tself.enableEditing = function () {\n\t\t\t\t\tcanvas.selection = true;\n\t\t\t\t\tcanvas.forEachObject(function (object) {\n\t\t\t\t\t\tobject.selectable = true;\n\t\t\t\t\t});\n\t\t\t\t};\n\n\n\t\t\t\t//\n\t\t\t\t// Set Global Defaults\n\t\t\t\t// ==============================================================\n\t\t\t\tself.setCanvasDefaults = function () {\n\t\t\t\t\tcanvas.selection = self.canvasDefaults.selection;\n\t\t\t\t};\n\n\t\t\t\tself.setWindowDefaults = function () {\n\t\t\t\t\tFabricWindow.Object.prototype.transparentCorners = self.windowDefaults.transparentCorners;\n\t\t\t\t\tFabricWindow.Object.prototype.rotatingPointOffset = self.windowDefaults.rotatingPointOffset;\n\t\t\t\t\tFabricWindow.Object.prototype.padding = self.windowDefaults.padding;\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Canvas Listeners\n\t\t\t\t// ============================================================\n\t\t\t\tself.startCanvasListeners = function () {\n\t\t\t\t\tcanvas.on('object:selected', function () {\n\t\t\t\t\t\tself.stopContinuousRendering();\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tself.selectActiveObject();\n\t\t\t\t\t\t\tself.setDirty(true);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tcanvas.on('selection:created', function () {\n\t\t\t\t\t\tself.stopContinuousRendering();\n\t\t\t\t\t});\n\n\t\t\t\t\tcanvas.on('selection:cleared', function () {\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tself.deselectActiveObject();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tcanvas.on('after:render', function () {\n\t\t\t\t\t\tcanvas.calcOffset();\n\t\t\t\t\t});\n\n\t\t\t\t\tcanvas.on('object:modified', function () {\n\t\t\t\t\t\tself.stopContinuousRendering();\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tself.updateActiveObjectOriginals();\n\t\t\t\t\t\t\tself.setDirty(true);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t//\n\t\t\t\t// Constructor\n\t\t\t\t// ==============================================================\n\t\t\t\tself.init = function () {\n\t\t\t\t\tcanvas = FabricCanvas.getCanvas();\n\t\t\t\t\tself.canvasId = FabricCanvas.getCanvasId();\n\t\t\t\t\tcanvas.clear();\n\n\t\t\t\t\t// For easily accessing the json\n\t\t\t\t\tJSONObject = angular.fromJson(self.json);\n\t\t\t\t\tself.loadJSON(self.json);\n\n\t\t\t\t\tJSONObject = JSONObject || {};\n\n\t\t\t\t\tself.canvasScale = 1;\n\n\t\t\t\t\tJSONObject.background = JSONObject.background || '#ffffff';\n\t\t\t\t\tself.setCanvasBackgroundColor(JSONObject.background);\n\n\t\t\t\t\t// Set the size of the canvas\n\t\t\t\t\tJSONObject.width = JSONObject.width || 800;\n\t\t\t\t\tself.canvasOriginalWidth = JSONObject.width;\n\n\t\t\t\t\tJSONObject.height = JSONObject.height || 600;\n\t\t\t\t\tself.canvasOriginalHeight = JSONObject.height;\n\n\t\t\t\t\tself.setCanvasSize(self.canvasOriginalWidth, self.canvasOriginalHeight);\n\n\t\t\t\t\tself.render();\n\t\t\t\t\tself.setDirty(false);\n\t\t\t\t\tself.setInitalized(true);\n\n\t\t\t\t\tself.setCanvasDefaults();\n\t\t\t\t\tself.setWindowDefaults();\n\t\t\t\t\tself.startCanvasListeners();\n\t\t\t\t\tself.startContinuousRendering();\n\t\t\t\t\tFabricDirtyStatus.startListening();\n\t\t\t\t};\n\n\t\t\t\tself.init();\n\n\t\t\t\treturn self;\n\n\t\t\t};\n\n\t\t}]);"]}